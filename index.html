<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>íŒë§¤ê´€ë¦¬ ì‹œìŠ¤í…œ</title>

  <!-- jQuery & DataTables -->
  <script src="js/jquery-3.7.1.min.js"></script>
  <link rel="stylesheet" href="DataTable/datatables.css" />
  <script src="DataTable/datatables.min.js"></script>

  <!-- ë‹¤ìŒ ìš°í¸ë²ˆí˜¸ API -->
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

  <script src="js/dataTableInit.js" defer></script>

  <script src="js/customer.js" defer></script>
  <script src="js/supplier.js" defer></script>
  <script src="js/quotation.js" defer></script>
  <script src="js/postoffice.js" defer></script>
  <!-- <script src="js/transaction.js" defer></script> -->

  <link rel="stylesheet" href="css/onstyles.css" />
  <!-- <link rel="stylesheet" href="css/default.css" /> -->
</head>

<body>
  <!-- ë¡œê·¸ì¸ í˜ì´ì§€ -->
  <div class="login-container" id="loginPage">
    <div class="login-box">
      <div class="login-header">
        <h1>íŒë§¤ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
        <p id="workplaceNameLogin" style="font-size: 16px; font-weight: 600; color: var(--primary); margin-top: 8px;">ì‚¬ì—…ì¥ ì •ë³´ ë¡œë”© ì¤‘...</p>
        <p>ë¡œê·¸ì¸í•˜ì—¬ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ì„¸ìš”</p>
      </div>
      <form id="loginForm">
        <div class="form-group">
          <label for="loginDateText">ì ‘ì†ì¼ì</label>
          <div style="display: flex; gap: 12px; align-items: center">
            <input type="text" id="loginDateText" class="form-input" placeholder="YYYY-MM-DD ì§ì ‘ ì…ë ¥"
              autocomplete="off" />
            <div style="position: relative; flex: 1">
              <input type="date" id="loginDatePicker" class="form-input" style="padding-right: 44px" />
              <button type="button" onclick="openLoginDatePicker()" aria-label="ë‹¬ë ¥ìœ¼ë¡œ ì¼ì ì„ íƒ" style="
                    position: absolute;
                    top: 50%;
                    right: 12px;
                    transform: translateY(-50%);
                    background: none;
                    border: none;
                    cursor: pointer;
                    padding: 0;
                    display: flex;
                  ">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="userId">ì‚¬ìš©ì ì•„ì´ë””</label>
          <input type="text" id="userId" class="form-input" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required />
        </div>
        <div class="form-group">
          <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
          <input type="password" id="password" class="form-input" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
            autocomplete="current-password" required />
        </div>
        <button type="submit" class="btn-login">ë¡œê·¸ì¸</button>
      </form>
      <div class="login-message" id="loginMessage">ì‹œìŠ¤í…œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</div>
    </div>
  </div>

  <!-- ëŒ€ì‹œë³´ë“œ -->
  <div class="dashboard" id="dashboard">
    <!-- ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>íŒë§¤ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
        <p id="workplaceNameSidebar" style="font-size: 14px; color: #93c5fd; margin-top: 4px; font-weight: 500;"></p>
      </div>
      <nav class="sidebar-menu">
        <div class="menu-item">
          <a class="menu-link active" onclick="showPage('dashboard')">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
              </path>
            </svg>
            ëŒ€ì‹œë³´ë“œ
          </a>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="jangbuMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
              </path>
            </svg>
            ì¥ë¶€ê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <!--  
            ë§¤ì…ì²˜ì¥ë¶€ê´€ë¦¬ -> Purchaser's ledger management 
            ë§¤ì¶œì²˜ì¥ë¶€ê´€ë¦¬ -> Sales ledger management
            ë¯¸ìˆ˜ê¸ˆê´€ë¦¬ -> Accounts receivable management
            ë¯¸ì§€ê¸‰ê¸ˆê´€ë¦¬ -> Accounts Payable Management
            í˜„ê¸ˆì¶œë‚©ì¥ê´€ë¦¬ -> Cash receipt and disbursement management
            ì„¸ê¸ˆê³„ì‚°ì„œê´€ë¦¬ -> Tax invoice management
            -->
          <div class="submenu" id="jangbuSubmenu">
            <a class="submenu-link" onclick="showPage('item-catagory')">ë§¤ì…ì²˜ì¥ë¶€ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-history')">ë§¤ì¶œì²˜ì¥ë¶€ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-stock')">ë¯¸ìˆ˜ê¸ˆê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-stock')">ë¯¸ì§€ê¸‰ê¸ˆê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-stock')">í˜„ê¸ˆì¶œë‚©ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-stock')">ì„¸ê¸ˆê³„ì‚°ì„œê´€ë¦¬</a>
          </div>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="purchaseMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
            ë§¤ì…ê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <div class="submenu" id="purchaseSubmenu">
            <a class="submenu-link" onclick="showPage('order')">ë°œì£¼ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('purchase')">ë§¤ì…ì „í‘œê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('supplier')">ë§¤ì…ì²˜ê´€ë¦¬</a>
          </div>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="salesMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">
              </path>
            </svg>
            ë§¤ì¶œê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <div class="submenu" id="salesSubmenu">
            <a class="submenu-link" onclick="showPage('quotation')">ê²¬ì ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('transaction')">ê±°ë˜ëª…ì„¸ì„œê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('customer')">ë§¤ì¶œì²˜ê´€ë¦¬</a>
          </div>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="itemMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
            </svg>
            ìì¬ê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <div class="submenu" id="itemsSubmenu">
            <a class="submenu-link" onclick="showPage('item-catagory')">ìì¬ë¶„ë¥˜ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-history')">ìì¬ë‚´ì—­ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('item-stock')">ìì¬ì¬ê³ ê´€ë¦¬</a>
          </div>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="accountMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z">
              </path>
            </svg>
            íšŒê³„ê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <div class="submenu" id="accountSubmenu">
            <a class="submenu-link" onclick="showPage('account-catagory')">íšŒê³„ê°œì •ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('account-history')">í˜„ê¸ˆì¶œë‚©ë‚´ì—­ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('total-balnace')">í•©ê³„ì”ì•¡ì‹œì‚°í‘œ</a>
            <a class="submenu-link" onclick="showPage('account-balnace')">ëŒ€ì°¨ëŒ€ì¡°í‘œ</a>
          </div>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="printMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z">
              </path>
            </svg>
            ì¶œë ¥ë¬¼ê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <div class="submenu" id="printSubmenu">
            <a class="submenu-link" onclick="showPage('itembook-printMenu')">ìì¬ëŒ€ì¥ì¶œë ¥ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('salesbook-printMenu')">ë§¤ì¶œì²˜ì¶œë ¥ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('quotation-printMenu')">ë§¤ì…ì²˜ì¶œë ¥ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('account-balnace')">ë°œì£¼ì„œì¶œë ¥ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('account-balnace')">ê²¬ì ì„œì¶œë ¥ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('account-balnace')">ì„¸ê¸ˆê³„ì‚°ì„œì¶œë ¥ê´€ë¦¬</a>
          </div>
        </div>

        <div class="menu-item">
          <a class="menu-link" onclick="toggleSubmenu(this)" id="settingMenu">
            <svg class="menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
              </path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            ì„¤ì •ê´€ë¦¬
            <span class="arrow">â–¼</span>
          </a>
          <div class="submenu" id="settingSubmenu">
            <a class="submenu-link" onclick="showPage('paper-setting')">ìš©ì§€ì„¤ì •ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('salespaper-setting')">ê±°ë˜ëª…ì„¸ì„œì„¤ì •ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('taxpaper-setting')">ì„¸ê¸ˆê³„ì‚°ì„œì„¤ì •ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('warehouse-setting')">ì°½ê³ ì„¤ì •ê´€ë¦¬</a>
            <a class="submenu-link" onclick="showPage('taxrate-setting')">ë¶€ê³¼ì„¸ìœ¨ì„¤ì •ê´€ë¦¬</a>
          </div>
        </div>
      </nav>
    </aside>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main-content">
      <div class="top-bar">
        <h1 id="pageTitle">ëŒ€ì‹œë³´ë“œ</h1>
        <div class="user-info">
          <div class="user-avatar" id="userAvatar">U</div>
          <span id="userName">ì‚¬ìš©ì</span>
          <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
      </div>

      <div class="content-area">
        <!-- ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ -->
        <div class="page-content active" id="dashboardPage">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">ì˜¤ëŠ˜ ë§¤ì¶œ</div>
              <div class="stat-value">â‚©0</div>
              <div class="stat-change">ë°ì´í„° ë¡œë”©ì¤‘...</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">ì´ë²ˆë‹¬ ë§¤ì¶œ</div>
              <div class="stat-value">â‚©0</div>
              <div class="stat-change">ë°ì´í„° ë¡œë”©ì¤‘...</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">ë¯¸ìˆ˜ê¸ˆ</div>
              <div class="stat-value">â‚©0</div>
              <div class="stat-change">ë°ì´í„° ë¡œë”©ì¤‘...</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">ì¬ê³  í˜„í™©</div>
              <div class="stat-value">0ê±´</div>
              <div class="stat-change">ë°ì´í„° ë¡œë”©ì¤‘...</div>
            </div>
          </div>

          <div class="content-card">
            <h3 class="card-title">íŒë§¤ê´€ë¦¬ ì‹œìŠ¤í…œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</h3>
            <p style="color: var(--text-gray); margin-top: 16px; line-height: 1.6">
              ì¢Œì¸¡ ë©”ë‰´ì—ì„œ ì›í•˜ì‹œëŠ” ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”.<br />
              â€¢ ë§¤ì¶œê´€ë¦¬: ê²¬ì , ê±°ë˜ëª…ì„¸ì„œ, ë§¤ì¶œì²˜ ê´€ë¦¬<br />
              â€¢ ë§¤ì…ê´€ë¦¬: ë°œì£¼, ë§¤ì…ì „í‘œ, ë§¤ì…ì²˜ ê´€ë¦¬<br />
              â€¢ ì¬ê³ ê´€ë¦¬: ìì¬ ë° ì¬ê³  í˜„í™© ì¡°íšŒ
            </p>
          </div>
        </div>

        <!-- ë§¤ì¶œì²˜ê´€ë¦¬ í˜ì´ì§€ -->
        <div id="customerPage" class="page-content hidden">
          <h2 style="display: none;">ë§¤ì¶œì²˜ê´€ë¦¬</h2>
          <div class="toolbar" style="justify-content: flex-end;">
            <button id="btnReload" style="display: none;">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
            <button class="btn btn-success" onclick="openNewCustomerModal()" style="
                  padding: 10px 20px;
                  background: #28a745;
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                  margin-right: 8px;
                ">
              <span style="font-size: 18px; margin-right: 4px;">+</span> ì‹ ê·œ ë“±ë¡
            </button>
            <button class="btn btn-secondary" onclick="exportCustomersToGoogleSheets()" style="
                  padding: 10px 20px;
                  background: #6c757d;
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                ">
              <span style="font-size: 18px; margin-right: 4px;">ğŸ“Š</span> Google Sheetsë¡œ ë³´ë‚´ê¸°
            </button>
          </div>

          <!-- âœ… DataTables ì ìš©ìš© í…Œì´ë¸” -->
          <table id="customerTable" class="display" style="width:100%">
            <thead>
              <tr>
                <th style="width: 40px;">
                  <input type="checkbox" id="selectAllCustomers" title="ì „ì²´ ì„ íƒ" aria-label="ì „ì²´ ì„ íƒ" />
                </th>
                <th>ìˆœë²ˆ</th>
                <th>ë§¤ì¶œì²˜ì½”ë“œ</th>
                <th>ë§¤ì¶œì²˜ëª…</th>
                <th>ëŒ€í‘œì</th>
                <th>ì‚¬ì—…ìë²ˆí˜¸</th>
                <th>ì—°ë½ì²˜</th>
                <th>ê±°ë˜ìƒíƒœ</th>
                <th>ë“±ë¡ì¼</th>
                <th style="width: 180px;">ê´€ë¦¬</th>
              </tr>
            </thead>
          </table>
        </div>        

        <!-- ê²¬ì ê´€ë¦¬ í˜ì´ì§€ -->
        <div class="page-content hidden" id="quotationPage">
          <h2 style="display: none;">ê²¬ì ê´€ë¦¬</h2>
          <div class="toolbar" style="justify-content: space-between;">
            <div class="toolbar-left" style="display: flex; gap: 12px; align-items: center;">
              <select id="quotationStatusFilter" class="form-control" style="width: 150px;" onchange="filterQuotations()">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="1">ì‘ì„±ì¤‘</option>
                <option value="2">ìŠ¹ì¸</option>
                <option value="3">ë°˜ë ¤</option>
              </select>
              <input type="date" id="quotationStartDate" class="form-control" style="width: 150px;" />
              <span>~</span>
              <input type="date" id="quotationEndDate" class="form-control" style="width: 150px;" />
              <button class="btn btn-secondary" onclick="filterQuotations()">ì¡°íšŒ</button>
            </div>
            <div class="toolbar-right">
              <button class="btn btn-success" onclick="openQuotationModal()" style="
                    padding: 10px 20px;
                    background: #28a745;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-size: 14px;
                    font-weight: 500;
                    cursor: pointer;
                  ">
                <span style="font-size: 18px; margin-right: 4px;">+</span> ê²¬ì ì„œ ì‘ì„±
              </button>
              <button class="btn btn-secondary" onclick="exportQuotationsToExcel()" style="
                  padding: 10px 20px;
                  background: #6c757d;
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                ">
                <span>&#128196;</span> Google Sheetsë¡œ ë‚´ë³´ë‚´ê¸°
              </button>
            </div>
          </div>

          <!-- âœ… ê²¬ì  ìš”ì•½ ì •ë³´ -->
          <div class="summary-bar" style="margin: 10px 0; font-size: 14px;">
            ì´ ê²¬ì  ìˆ˜: <span id="quotationCount" style="font-weight: bold;">0</span> ê±´
          </div>

          <!-- DataTable -->
          <table id="quotationTable" class="display" style="width:100%">
            <thead>
              <tr>
                <th style="width: 40px;"><input type="checkbox" id="selectAllQuotations" /></th>
                <th>ìˆœë²ˆ</th>
                <th>ê²¬ì ë²ˆí˜¸</th>
                <th>ë§¤ì¶œì²˜ëª…</th>
                <th>ê²¬ì ì¼ì</th>
                <th>ì¶œê³ í¬ë§ì¼</th>
                <th>ì œëª©</th>
                <th>ë‹´ë‹¹ì</th>
                <th>ìƒíƒœ</th>
                <th>ê´€ë¦¬</th>
              </tr>
            </thead>
            <tbody id="quotationTableBody">
            </tbody>            
          </table>          
        </div>        

        <!-- âœ… ê²¬ì  ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
        <div id="quotationDetailModal" class="modal hidden">
          <div class="modal-content large" style="max-width: 1000px; max-height: 90vh; overflow-y: auto;">
            <!-- âœ… í—¤ë” ì˜ì—­ (ì œëª© + ë‹«ê¸° ë²„íŠ¼) -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb;">
              <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: #1f2937;">ê²¬ì  ìƒì„¸ ë³´ê¸°</h2>
              <button id="closeQuotationDetailModal" style="
                width: 36px;
                height: 36px;
                border-radius: 50%;
                background: #f3f4f6;
                border: none;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                color: #6b7280;
                transition: all 0.2s;
              " onmouseover="this.style.background='#e5e7eb'; this.style.color='#1f2937';"
                 onmouseout="this.style.background='#f3f4f6'; this.style.color='#6b7280';">
                &times;
              </button>
            </div>

            <!-- âœ… ê²¬ì  ê¸°ë³¸ ì •ë³´ (ì¹´ë“œ ìŠ¤íƒ€ì¼) -->
            <div style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 24px; border: 1px solid #e5e7eb;">
              <h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #374151;">ê¸°ë³¸ ì •ë³´</h3>
              <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                <div style="display: flex; align-items: center;">
                  <span style="min-width: 100px; font-weight: 500; color: #6b7280;">ê²¬ì ë²ˆí˜¸</span>
                  <span id="q_no" style="color: #1f2937; font-weight: 600;">-</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="min-width: 100px; font-weight: 500; color: #6b7280;">ê²¬ì ì¼ì</span>
                  <span id="q_date" style="color: #1f2937;">-</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="min-width: 100px; font-weight: 500; color: #6b7280;">ë§¤ì¶œì²˜ëª…</span>
                  <span id="q_customer" style="color: #1f2937;">-</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="min-width: 100px; font-weight: 500; color: #6b7280;">ë¹„ê³ </span>
                  <span id="q_remark" style="color: #1f2937;">-</span>
                </div>
              </div>
            </div>

            <!-- âœ… ê²¬ì  ìƒì„¸ ëª©ë¡ -->
            <div>
              <h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #374151;">ê²¬ì  í’ˆëª© ë‚´ì—­</h3>
              <table id="quotationDetailTable" class="display" style="width:100%">
                <thead>
                  <tr>
                    <th>í’ˆëª©ì½”ë“œ</th>
                    <th>í’ˆëª…</th>
                    <th>ê·œê²©</th>
                    <th>ìˆ˜ëŸ‰</th>
                    <th>ë‹¨ê°€</th>
                    <th>ê¸ˆì•¡</th>
                  </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                  <tr style="background: #f9fafb; font-weight: bold;">
                    <td colspan="5" style="text-align: right; padding-right: 20px; color: #1f2937;">í•©ê³„</td>
                    <td id="quotationDetailTotal" style="text-align: right; color: #2563eb; font-size: 16px;">0</td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

        <!-- ê±°ë˜ëª…ì„¸ì„œê´€ë¦¬ í˜ì´ì§€ -->
        <div class="page-content" id="transactionPage">
          <div class="toolbar">
            <div class="toolbar-left">
              <!-- ê±°ë˜ëª…ì„¸ì„œ ë²ˆí˜¸ ì…ë ¥ -->
              <input type="text" id="transactionNo" class="form-input" placeholder="ê±°ë˜ëª…ì„¸ì„œ ë²ˆí˜¸ ì…ë ¥" style="width:140px;" />

              <!-- ê¸°ì¤€ì¼ì -->
              <input type="date" id="transactionDate" class="form-input" />

              <!-- ê±°ë˜ì²˜ ì„ íƒ -->
              <select id="customerSelect" class="form-input">
                <option value="">ì „ì²´ ê±°ë˜ì²˜</option>
              </select>

              <!-- ì¡°íšŒ ë²„íŠ¼ -->
              <button class="btn btn-secondary" onclick="loadTransactions()">ì¡°íšŒ</button>
              <div class="toolbar-right">
                <button class="btn btn-success"><span>+</span> ê±°ë˜ëª…ì„¸ì„œ ì‘ì„±</button>
                <button class="btn btn-secondary"><span>ğŸ“„</span> ì¶œë ¥</button>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ëª…ì„¸ì„œë²ˆí˜¸</th>
                    <th>ë§¤ì¶œì²˜ëª…</th>
                    <th>ê±°ë˜ì¼ì</th>
                    <th>ê³µê¸‰ê°€ì•¡</th>
                    <th>ë¶€ê°€ì„¸</th>
                    <th>í•©ê³„ê¸ˆì•¡</th>
                    <th>ë‹´ë‹¹ì</th>
                    <th>ìƒíƒœ</th>
                    <th>ê´€ë¦¬</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="9" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- ë°œì£¼ê´€ë¦¬ í˜ì´ì§€ -->
        <div class="page-content" id="orderPage">
          <div class="toolbar">
            <div class="toolbar-left">
              <select class="form-control" style="width: 150px">
                <option>ì „ì²´</option>
                <option>ë°œì£¼ëŒ€ê¸°</option>
                <option>ë°œì£¼ì™„ë£Œ</option>
                <option>ì…ê³ ì™„ë£Œ</option>
              </select>
              <div class="search-box">
                <input type="text" class="search-input" id="orderSearch" placeholder="ë°œì£¼ë²ˆí˜¸ ë˜ëŠ” ë§¤ì…ì²˜ëª…ìœ¼ë¡œ ê²€ìƒ‰..." />
                <button class="btn btn-secondary" onclick="loadOrders()">ê²€ìƒ‰</button>
              </div>
            </div>
            <div class="toolbar-right">
              <button class="btn btn-success"><span>+</span> ë°œì£¼ì„œ ì‘ì„±</button>
              <button class="btn btn-secondary"><span>ğŸ“„</span> ì¶œë ¥</button>
            </div>
          </div>

          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ë°œì£¼ë²ˆí˜¸</th>
                  <th>ë§¤ì…ì²˜ëª…</th>
                  <th>ë°œì£¼ì¼ì</th>
                  <th>ë‚©ê¸°ì¼ì</th>
                  <th>ë°œì£¼ê¸ˆì•¡</th>
                  <th>ë‹´ë‹¹ì</th>
                  <th>ìƒíƒœ</th>
                  <th>ê´€ë¦¬</th>
                </tr>
              </thead>
              <tbody id="orderTableBody">
                <tr>
                  <td colspan="8" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="pagination" id="orderPagination"></div>
        </div>        

        <!-- ë§¤ì…ì „í‘œê´€ë¦¬ í˜ì´ì§€ -->
        <div class="page-content" id="purchasePage">
          <div class="toolbar">
            <div class="toolbar-left">
              <input type="date" class="form-control" style="width: 180px" />
              <span style="padding: 0 8px">~</span>
              <input type="date" class="form-control" style="width: 180px" />
              <button class="btn btn-secondary">ì¡°íšŒ</button>
            </div>
            <div class="toolbar-right">
              <button class="btn btn-success"><span>+</span> ë§¤ì…ì „í‘œ ì‘ì„±</button>
              <button class="btn btn-secondary"><span>ğŸ“„</span> ì¶œë ¥</button>
            </div>
          </div>

          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ì „í‘œë²ˆí˜¸</th>
                  <th>ë§¤ì…ì²˜ëª…</th>
                  <th>ë§¤ì…ì¼ì</th>
                  <th>ê³µê¸‰ê°€ì•¡</th>
                  <th>ë¶€ê°€ì„¸</th>
                  <th>í•©ê³„ê¸ˆì•¡</th>
                  <th>ë‹´ë‹¹ì</th>
                  <th>ìƒíƒœ</th>
                  <th>ê´€ë¦¬</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="9" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>      

        <!-- ë§¤ì…ì²˜ê´€ë¦¬ í˜ì´ì§€ -->
        <div class="page-content" id="supplierPage">
          <div class="toolbar">
            <div class="toolbar-left">
              <div class="search-box">
                <input type="text" class="search-input" id="supplierSearch" placeholder="ë§¤ì…ì²˜ëª… ë˜ëŠ” ì‚¬ì—…ìë²ˆí˜¸ë¡œ ê²€ìƒ‰..." />
                <button class="btn btn-secondary" onclick="loadSuppliers()">ê²€ìƒ‰</button>
              </div>
            </div>
            <div class="toolbar-right">
              <button class="btn btn-success" onclick="console.log('ğŸ”˜ ë§¤ì…ì²˜ ì‹ ê·œ ë“±ë¡ ë²„íŠ¼ í´ë¦­ë¨'); openSupplierModal();">
                <span>+</span> ì‹ ê·œ ë“±ë¡
              </button>
              <!-- <button class="btn btn-success"><span>+</span> ì‹ ê·œ ë“±ë¡</button> -->
              <!-- <button class="btn btn-secondary"><span>ğŸ“„</span> ì—‘ì…€ ë‚´ë³´ë‚´ê¸°</button> -->
              <button class="btn btn-secondary" onclick="exportSuppliersToExcel()">
                <span>ğŸ“Š</span> Google Sheetsë¡œ ë‚´ë³´ë‚´ê¸°
              </button>
            </div>
          </div>

          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th style="width: 40px">
                    <input type="checkbox" id="selectAllSuppliers" onclick="toggleSelectAllSuppliers(this)" />
                  </th>
                  <th>ë²ˆí˜¸</th>
                  <th>ë§¤ì…ì²˜ì½”ë“œ</th>
                  <th>ë§¤ì…ì²˜ëª…</th>
                  <th>ëŒ€í‘œì</th>
                  <th>ì‚¬ì—…ìë²ˆí˜¸</th>
                  <th>ì—°ë½ì²˜</th>
                  <th>ê±°ë˜ìƒíƒœ</th>
                  <th>ë“±ë¡ì¼</th>
                  <th>ê´€ë¦¬</th>
                </tr>
              </thead>
              <tbody id="supplierTableBody">
                <tr>
                  <td colspan="10" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="pagination" id="supplierPagination"></div>
        </div>
    </main>
  </div>

  <script>
    // ëª¨ë‹¬ì„ body ì§ì†ìœ¼ë¡œ ì´ë™ (dashboard CSS ì˜í–¥ íšŒí”¼)
    document.addEventListener('DOMContentLoaded', function () {
      
      const today = new Date();
      const formatted = today.toISOString().slice(0, 10); // YYYY-MM-DD í˜•ì‹

      const loginDateText = document.getElementById("loginDateText");
      const loginDatePicker = document.getElementById("loginDatePicker");

      // ë‘ ì…ë ¥ì°½ ëª¨ë‘ ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì„¤ì •
      if (loginDateText) loginDateText.value = formatted;
      if (loginDatePicker) loginDatePicker.value = formatted;

      console.log(`âœ… ë¡œê·¸ì¸ ë‚ ì§œ ìë™ ì„¤ì • ì™„ë£Œ: ${formatted}`);
      
      const customerModal = document.getElementById('customerModal');
      const supplierModal = document.getElementById('supplierModal');

      if (customerModal && customerModal.parentElement !== document.body) {
        document.body.appendChild(customerModal);
        console.log('âœ… ë§¤ì¶œì²˜ ëª¨ë‹¬ì„ bodyë¡œ ì´ë™ ì™„ë£Œ');
      }

      if (supplierModal && supplierModal.parentElement !== document.body) {
        document.body.appendChild(supplierModal);
        console.log('âœ… ë§¤ì…ì²˜ ëª¨ë‹¬ì„ bodyë¡œ ì´ë™ ì™„ë£Œ');
      }
    });

    // API ê¸°ë³¸ URL
    const API_BASE_URL = 'http://localhost:3000/api';

    // í˜„ì¬ ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´
    let currentUser = null;

    let currentCustomerPage = 1;
    let customerPageSizeSelected = 10;
    let customerPageSizeEffective = 10;

    let currentSupplierPage = 1;
    let supplierPageSizeSelected = 10;
    let supplierPageSizeEffective = 10;

    function getCustomerEffectivePageSize() {
      // ì…€ë ‰í„° ì„ íƒê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš© (í™”ë©´ ë†’ì´ë¡œ ì œí•œí•˜ì§€ ì•ŠìŒ)
      const select = document.getElementById('customerPageSizeSelect');
      const selected = Number(select?.value || customerPageSizeSelected || 10);
      customerPageSizeSelected = selected;
      customerPageSizeEffective = selected;
      return selected;
    }

    function getSupplierEffectivePageSize() {
      const select = document.getElementById('supplierPageSizeSelect');
      const selected = Number(select?.value || supplierPageSizeSelected || 10);
      supplierPageSizeSelected = selected;
      supplierPageSizeEffective = selected;
      return selected;
    }

    function debounce(fn, wait = 200) {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...args), wait);
      };
    }

    document.addEventListener('DOMContentLoaded', () => {
      // ì£¼ì…ì‹ í˜ì´ì§€ ì‚¬ì´ì¦ˆ ì„ íƒ ë°•ìŠ¤ ìƒì„±
      const toolbarLeft = document.querySelector('#customerPage .toolbar .toolbar-left');
      if (toolbarLeft && !document.getElementById('customerPageSizeSelect')) {
        const sel = document.createElement('select');
        sel.id = 'customerPageSizeSelect';
        sel.className = 'form-control';
        sel.style.width = '120px';
        sel.style.marginLeft = '8px';
        [10, 15, 20, 25, 50].forEach((n) => {
          const opt = document.createElement('option');
          opt.value = String(n);
          opt.textContent = n + 'ê°œ';
          if (n === 10) opt.selected = true;
          sel.appendChild(opt);
        });
        toolbarLeft.appendChild(sel);
        // âŒ ì£¼ì„: customer.jsì˜ DataTableì´ ìë™ìœ¼ë¡œ í˜ì´ì§€ ì‚¬ì´ì¦ˆ ê´€ë¦¬
        // sel.addEventListener('change', () => loadCustomers(1));
      }

      const supplierToolbarLeft = document.querySelector('#supplierPage .toolbar .toolbar-left');
      if (supplierToolbarLeft && !document.getElementById('supplierPageSizeSelect')) {
        const sel = document.createElement('select');
        sel.id = 'supplierPageSizeSelect';
        sel.className = 'form-control';
        sel.style.width = '120px';
        sel.style.marginLeft = '8px';
        [10, 15, 20, 25, 50].forEach((n) => {
          const opt = document.createElement('option');
          opt.value = String(n);
          opt.textContent = n + 'ê°œ';
          if (n === 10) opt.selected = true;
          sel.appendChild(opt);
        });
        supplierToolbarLeft.appendChild(sel);
        sel.addEventListener('change', () => loadSuppliers(1));
      }

      window.addEventListener(
        'resize',
        debounce(() => {
          const customerActive = document
            .getElementById('customerPage')
            ?.classList.contains('active');
          // âŒ ì£¼ì„: customer.jsì˜ DataTableì´ ìë™ìœ¼ë¡œ ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬
          // if (customerActive) loadCustomers(currentCustomerPage);

          const supplierActive = document
            .getElementById('supplierPage')
            ?.classList.contains('active');
          if (supplierActive) loadSuppliers(currentSupplierPage);
        }, 200),
      );
    });

    // API í˜¸ì¶œ í—¬í¼ í•¨ìˆ˜
    async function apiCall(endpoint, method = 'GET', data = null) {
      
      try {
        let url = `${API_BASE_URL}${endpoint}`;
        const options = {
          method,
          headers: { 'Content-Type': 'application/json' },
        };

        // âœ… GET ìš”ì²­ì¼ ë•Œ: dataë¥¼ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë³€í™˜
        if (method.toUpperCase() === 'GET' && data && typeof data === 'object') {
          const queryString = new URLSearchParams(data).toString();
          if (queryString) url += (url.includes('?') ? '&' : '?') + queryString;
        }
        // âœ… POST/PUT/DELETE ìš”ì²­ì¼ ë•Œ: bodyì— JSONìœ¼ë¡œ ì¶”ê°€
        else if (data) {
          options.body = JSON.stringify(data);
        }

        const response = await fetch(url, options);
        const result = await response.json();

        if (!response.ok) {
          throw new Error(result.message || 'ì„œë²„ ì˜¤ë¥˜');
        }

        return result;
      } catch (error) {
        console.error('API í˜¸ì¶œ ì—ëŸ¬:', error);
        throw error;
      }
    }

    function openLoginDatePicker() {
      const input = document.getElementById('loginDatePicker');
      if (!input) return;

      if (typeof input.showPicker === 'function') {
        input.showPicker();
      } else {
        input.focus();
      }
    }

    const loginDateTextInput = document.getElementById('loginDateText');
    const loginDatePickerInput = document.getElementById('loginDatePicker');

    if (loginDatePickerInput && loginDateTextInput) {
      loginDatePickerInput.addEventListener('change', () => {
        loginDateTextInput.value = loginDatePickerInput.value;
      });
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ì—…ì¥ëª… í‘œì‹œ (ë¡œê·¸ì¸ í˜ì´ì§€)
    async function loadWorkplaceInfo() {
      try {
        // ê¸°ë³¸ ì‚¬ì—…ì¥(01) ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const result = await apiCall('/workplaces/01', 'GET');
        if (result.success && result.data) {
          document.getElementById('workplaceNameLogin').textContent = result.data.ì‚¬ì—…ì¥ëª…;
        } else {
          document.getElementById('workplaceNameLogin').textContent = '';
        }
      } catch (error) {
        console.error('ì‚¬ì—…ì¥ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
        document.getElementById('workplaceNameLogin').textContent = '';
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ì—…ì¥ëª… í‘œì‹œ
    loadWorkplaceInfo();

    // Top-bar ìŠ¤í¬ë¡¤ íš¨ê³¼
    const mainContent = document.querySelector('.main-content');
    const topBar = document.querySelector('.top-bar');

    if (mainContent && topBar) {
      mainContent.addEventListener('scroll', function () {
        if (mainContent.scrollTop > 50) {
          topBar.classList.add('scrolled');
        } else {
          topBar.classList.remove('scrolled');
        }
      });
    }

    // ë¡œê·¸ì¸ ì²˜ë¦¬
    document.getElementById('loginForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const userId = document.getElementById('userId').value;
      const password = document.getElementById('password').value;
      const loginDateTextValue = loginDateTextInput.value.trim();
      const loginDatePickerValue = loginDatePickerInput.value;
      const loginDate = loginDatePickerValue || loginDateTextValue;
      const messageEl = document.getElementById('loginMessage');

      if (!loginDate) {
        messageEl.textContent = 'ì ‘ì†ì¼ìë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ì„ íƒí•´ ì£¼ì„¸ìš”.';
        messageEl.classList.add('error');
        messageEl.classList.add('show');
        loginDateTextInput.focus();
        return;
      }

      if (loginDatePickerValue && loginDateTextValue !== loginDatePickerValue) {
        loginDateTextInput.value = loginDatePickerValue;
      }

      try {
        messageEl.textContent = 'ë¡œê·¸ì¸ ì¤‘...';
        messageEl.classList.remove('error');
        messageEl.classList.add('show');

        const result = await apiCall('/auth/login', 'POST', {
          userId: userId,
          password: password,
          loginDate: loginDate,
        });

        if (result.success) {
          currentUser = result.data;

          messageEl.textContent = result.message;

          setTimeout(() => {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('dashboard').classList.add('active');

            document.getElementById('userName').textContent = currentUser.ì‚¬ìš©ìëª…;
            document.getElementById('userAvatar').textContent = currentUser.ì‚¬ìš©ìëª….charAt(0);

            // ì‚¬ì´ë“œë°”ì— ì‚¬ì—…ì¥ëª… í‘œì‹œ
            if (currentUser.ì‚¬ì—…ì¥ëª…) {
              document.getElementById('workplaceNameSidebar').textContent = currentUser.ì‚¬ì—…ì¥ëª…;
            }

            // ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë“œ
            loadDashboardStats();
          }, 800);
        }
      } catch (error) {
        messageEl.textContent = 'ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message;
        messageEl.classList.add('error');
        messageEl.classList.add('show');
      }
    });

    // ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë“œ
    async function loadDashboardStats() {
      try {
        const result = await apiCall(`/dashboard/stats?ì‚¬ì—…ì¥ì½”ë“œ=${currentUser.ì‚¬ì—…ì¥ì½”ë“œ}`);

        if (result.success) {
          const stats = result.data;
          const statCards = document.querySelectorAll('.stat-card');

          statCards[0].querySelector('.stat-value').textContent =
            'â‚©' + Number(stats.todaySales).toLocaleString();
          statCards[0].querySelector('.stat-change').textContent = 'ì „ì¼ ëŒ€ë¹„';

          statCards[1].querySelector('.stat-value').textContent =
            'â‚©' + Number(stats.monthlySales).toLocaleString();
          statCards[1].querySelector('.stat-change').textContent = 'ì „ì›” ëŒ€ë¹„';

          statCards[2].querySelector('.stat-value').textContent =
            'â‚©' + Number(stats.unpaidAmount).toLocaleString();
          statCards[2].querySelector('.stat-change').textContent = 'ë¯¸ìˆ˜ê¸ˆ í˜„í™©';

          statCards[3].querySelector('.stat-value').textContent =
            Number(stats.inventoryCount).toLocaleString() + 'ê±´';
          statCards[3].querySelector('.stat-change').textContent = 'ì¬ê³  í’ˆëª©';
        }
      } catch (error) {
        console.error('í†µê³„ ë¡œë“œ ì‹¤íŒ¨:', error);
      }
    }

    /**
     * ì²´í¬ë°•ìŠ¤ ì„ íƒ ì‹œ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
     * @param {HTMLElement} checkbox - ì²´í¬ë°•ìŠ¤ ì—˜ë¦¬ë¨¼íŠ¸
     */
    function toggleCustomerActionButtons(checkbox) {
      const customerCode = checkbox.value;
      const actionsDiv = document.getElementById(`actions-${customerCode}`);

      if (!actionsDiv) return;

      const viewBtn = actionsDiv.querySelector('.btn-view');
      const editBtn = actionsDiv.querySelector('.btn-edit');
      const deleteBtn = actionsDiv.querySelector('.btn-delete');

      if (checkbox.checked) {
        // ì²´í¬ ì‹œ: ìƒì„¸ ë²„íŠ¼ ìˆ¨ê¸°ê³  ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ í‘œì‹œ
        viewBtn.style.display = 'none';
        editBtn.style.display = 'inline-block';
        deleteBtn.style.display = 'inline-block';
      } else {
        // ì²´í¬ í•´ì œ ì‹œ: ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ìˆ¨ê¸°ê³  ìƒì„¸ ë²„íŠ¼ í‘œì‹œ
        viewBtn.style.display = 'inline-block';
        editBtn.style.display = 'none';
        deleteBtn.style.display = 'none';
      }
    }

    /**
     * ì „ì²´ ì„ íƒ/í•´ì œ (ìˆ˜ì •ëœ ë²„ì „)
     * @param {HTMLElement} checkbox - ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤
     */
    function toggleSelectAllCustomers(checkbox) {
      const checkboxes = document.querySelectorAll('.customerCheckbox');
      checkboxes.forEach((cb) => {
        cb.checked = checkbox.checked;
        // ê° ì²´í¬ë°•ìŠ¤ì˜ ë²„íŠ¼ ìƒíƒœë„ ì—…ë°ì´íŠ¸
        toggleCustomerActionButtons(cb);
      });
    }

    function toggleSelectAllSuppliers(checkbox) {
      const supplierCheckboxes = document.querySelectorAll('.supplierCheckbox');
      supplierCheckboxes.forEach((cb) => (cb.checked = checkbox.checked));
    }

    /**
     * ë§¤ì¶œì²˜ ìˆ˜ì • í•¨ìˆ˜
     * @param {string} customerCode - ë§¤ì¶œì²˜ì½”ë“œ
     */
    async function editCustomer(customerCode) {
      try {
        console.log('===== ë§¤ì¶œì²˜ ìˆ˜ì • ì‹œì‘ =====');
        console.log('ë§¤ì¶œì²˜ì½”ë“œ:', customerCode);

        // 1. ë§¤ì¶œì²˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ
        const result = await apiCall(`/customers/${customerCode}`);

        if (!result.success) {
          throw new Error(result.message || 'ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        const customer = result.data;
        console.log('ì¡°íšŒëœ ë§¤ì¶œì²˜ ì •ë³´:', customer);

        // 2. ëª¨ë‹¬ ì—´ê¸°
        const modal = document.getElementById('customerModal');
        if (!modal) {
          throw new Error('ëª¨ë‹¬ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        // 3. ëª¨ë‹¬ ì œëª© ë³€ê²½
        const modalTitle = modal.querySelector('h2');
        if (modalTitle) {
          modalTitle.textContent = 'ë§¤ì¶œì²˜ ìˆ˜ì •';
        }

        // 4. í¼ í•„ë“œì— ë°ì´í„° ì±„ìš°ê¸°
        document.getElementById('customerCode').value = customer.ë§¤ì¶œì²˜ì½”ë“œ || '';
        document.getElementById('customerName').value = customer.ë§¤ì¶œì²˜ëª… || '';
        document.getElementById('ceoName').value = customer.ëŒ€í‘œìëª… || '';
        document.getElementById('businessNo').value = customer.ì‚¬ì—…ìë²ˆí˜¸ || '';
        document.getElementById('businessType').value = customer.ì—…íƒœ || '';
        document.getElementById('businessCategory').value = customer.ì—…ì¢… || '';
        document.getElementById('phone').value = customer.ì „í™”ë²ˆí˜¸ || '';
        document.getElementById('fax').value = customer.íŒ©ìŠ¤ë²ˆí˜¸ || '';
        document.getElementById('zipCode').value = customer.ìš°í¸ë²ˆí˜¸ || '';
        document.getElementById('address').value = customer.ì£¼ì†Œ || '';
        document.getElementById('addressDetail').value = customer.ë²ˆì§€ || '';
        document.getElementById('bankCode').value = customer.ì€í–‰ì½”ë“œ || '';
        document.getElementById('accountNo').value = customer.ê³„ì¢Œë²ˆí˜¸ || '';
        document.getElementById('managerName').value = customer.ë‹´ë‹¹ì || '';
        document.getElementById('status').value = customer.ì‚¬ìš©êµ¬ë¶„ || '0';
        document.getElementById('remark').value = customer.ë¹„ê³  || '';

        // 5. í¼ì— ìˆ˜ì • ëª¨ë“œ í‘œì‹œë¥¼ ìœ„í•œ ë°ì´í„° ì†ì„± ì¶”ê°€
        const form = document.getElementById('customerForm');
        form.setAttribute('data-mode', 'edit');
        form.setAttribute('data-customer-code', customerCode);

        // 6. ëª¨ë‹¬ í‘œì‹œ
        modal.style.display = 'flex';

        console.log('âœ… ë§¤ì¶œì²˜ ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸° ì™„ë£Œ');
      } catch (error) {
        console.error('âŒ ë§¤ì¶œì²˜ ìˆ˜ì • ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    /**
     * ë§¤ì¶œì²˜ ì‚­ì œ í•¨ìˆ˜
     * @param {string} customerCode - ë§¤ì¶œì²˜ì½”ë“œ
     */
    async function deleteCustomer(customerCode) {
      try {
        console.log('===== ë§¤ì¶œì²˜ ì‚­ì œ ì‹œì‘ =====');
        console.log('ë§¤ì¶œì²˜ì½”ë“œ:', customerCode);

        // 1. ì‚­ì œ í™•ì¸
        if (
          !confirm('ì •ë§ë¡œ ì´ ë§¤ì¶œì²˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
        ) {
          console.log('âŒ ì‚¬ìš©ìê°€ ì‚­ì œë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.');
          return;
        }

        // 2. API í˜¸ì¶œë¡œ ë§¤ì¶œì²˜ ì‚­ì œ
        const result = await apiCall(`/customers/${customerCode}`, 'DELETE');

        if (!result.success) {
          throw new Error(result.message || 'ë§¤ì¶œì²˜ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }

        console.log('âœ… ë§¤ì¶œì²˜ ì‚­ì œ ì„±ê³µ:', result);

        // 3. ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        alert('ë§¤ì¶œì²˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');

        // 4. ëª©ë¡ ìƒˆë¡œê³ ì¹¨ (DataTable ìë™ ìƒˆë¡œê³ ì¹¨)
        try {
          $('#customerTable').DataTable().ajax.reload(null, false);
          console.log('âœ… ë§¤ì¶œì²˜ ëª©ë¡ ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ');
        } catch (e) {
          console.warn('âš ï¸ DataTable ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨ (ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ í•„ìš”):', e);
        }
      } catch (error) {
        console.error('âŒ ë§¤ì¶œì²˜ ì‚­ì œ ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    

    // ë§¤ì…ì²˜ ëª©ë¡ ë¡œë“œ
    async function loadSuppliers(page = 1) {
      try {
        const searchValue = document.getElementById('supplierSearch')?.value || '';
        const tbody = document.getElementById('supplierTableBody');
        const pagination = document.getElementById('supplierPagination');
        const effectivePageSize = getSupplierEffectivePageSize();
        currentSupplierPage = page;

        tbody.innerHTML = '<tr><td colspan="10" class="loading">Loading...</td></tr>';
        pagination.innerHTML = '';

        const result = await apiCall('/suppliers', 'GET', {
          ì‚¬ì—…ì¥ì½”ë“œ: currentUser.ì‚¬ì—…ì¥ì½”ë“œ,
          search: searchValue,
          page,
          pageSize: effectivePageSize,
        });

        if (!result.success) {
          throw new Error(result.message || 'ì„œë²„ ì˜¤ë¥˜');
        }

        tbody.innerHTML = '';

        if (result.data.length === 0) {
          tbody.innerHTML = '<tr><td colspan="10" class="loading">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
          renderSupplierPagination(result.currentPage, result.totalPages);
          return;
        }

        const startNumber = (result.currentPage - 1) * supplierPageSizeEffective + 1;

        result.data.forEach((supplier, index) => {
          const statusClass = supplier.ì‚¬ìš©êµ¬ë¶„ === 0 ? 'status-active' : 'status-pending';
          const statusText = supplier.ì‚¬ìš©êµ¬ë¶„ === 0 ? 'ì •ìƒê±°ë˜' : 'ê±°ë˜ë³´ë¥˜';
          const rowNumber = startNumber + index;

          const tr = document.createElement('tr');
          tr.innerHTML = `
                    <td><input type="checkbox" class="supplierCheckbox" value="${supplier.ë§¤ì…ì²˜ì½”ë“œ
            }"></td>
                    <td>${rowNumber}</td>
                    <td>${supplier.ë§¤ì…ì²˜ì½”ë“œ}</td>
                    <td>${supplier.ë§¤ì…ì²˜ëª…}</td>
                    <td>${supplier.ëŒ€í‘œìëª… || '-'}</td>
                    <td>${supplier.ì‚¬ì—…ìë²ˆí˜¸ || '-'}</td>
                    <td>${supplier.ì „í™”ë²ˆí˜¸ || '-'}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>${supplier.ì‘ì„±ì || '-'}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="viewSupplier('${supplier.ë§¤ì…ì²˜ì½”ë“œ
            }')">ìƒì„¸</button>
                        </div>
                    </td>
                `;
          tbody.appendChild(tr);
        });

        renderSupplierPagination(result.currentPage, result.totalPages);
      } catch (error) {
        console.error('ë§¤ì…ì²˜ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
        const tbody = document.getElementById('supplierTableBody');
        tbody.innerHTML = `<tr><td colspan="10" class="loading" style="color: red;">ì˜¤ë¥˜: ${error.message}</td></tr>`;
      }
    }

    // í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
    function renderSupplierPagination(currentPage, totalPages) {
      const pagination = document.getElementById('supplierPagination');
      pagination.innerHTML = '';

      if (totalPages <= 1) return;

      const maxButtons = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));
      let endPage = Math.min(totalPages, startPage + maxButtons - 1);

      if (endPage - startPage < maxButtons - 1) {
        startPage = Math.max(1, endPage - maxButtons + 1);
      }

      // ì´ì „ ë²„íŠ¼
      if (currentPage > 1) {
        const prev = document.createElement('button');
        prev.textContent = 'ã€ˆ';
        prev.onclick = () => loadSuppliers(currentPage - 1);
        pagination.appendChild(prev);
      }

      // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼
      for (let i = startPage; i <= endPage; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        if (i === currentPage) btn.classList.add('active');
        btn.onclick = () => loadSuppliers(i);
        pagination.appendChild(btn);
      }

      // ë‹¤ìŒ ë²„íŠ¼
      if (currentPage < totalPages) {
        const next = document.createElement('button');
        next.textContent = 'ã€‰';
        next.onclick = () => loadSuppliers(currentPage + 1);
        pagination.appendChild(next);
      }
    }

    // âœ… ê²¬ì  ëª©ë¡ ë¡œë“œëŠ” quotation.jsì˜ DataTableì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

    // ë°œì£¼ ëª©ë¡ ë¡œë“œ
    async function loadOrders() {
      try {
        const searchValue = document.getElementById('orderSearch')?.value || '';
        const tbody = document.getElementById('orderTableBody');
        tbody.innerHTML = '<tr><td colspan="8" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>';

        const result = await apiCall(
          `/orders?ì‚¬ì—…ì¥ì½”ë“œ=${currentUser.ì‚¬ì—…ì¥ì½”ë“œ}&search=${searchValue}`,
        );

        if (result.success) {
          tbody.innerHTML = '';

          if (result.data.length === 0) {
            tbody.innerHTML = '<tr><td colspan="8" class="loading">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
            return;
          }

          result.data.forEach((order) => {
            const statusMap = {
              1: { class: 'status-pending', text: 'ë°œì£¼ëŒ€ê¸°' },
              2: { class: 'status-pending', text: 'ë°œì£¼ì™„ë£Œ' },
              3: { class: 'status-completed', text: 'ì…ê³ ì™„ë£Œ' },
            };
            const status = statusMap[order.ìƒíƒœì½”ë“œ] || statusMap[1];

            const tr = document.createElement('tr');
            tr.innerHTML = `
                            <td>PO${order.ë°œì£¼ì¼ì}-${order.ë°œì£¼ë²ˆí˜¸}</td>
                            <td>${order.ë§¤ì…ì²˜ëª… || '-'}</td>
                            <td>${order.ë°œì£¼ì¼ì}</td>
                            <td>${order.ì…ê³ í¬ë§ì¼ì || '-'}</td>
                            <td>â‚©0</td>
                            <td>${order.ì‚¬ìš©ìëª… || '-'}</td>
                            <td><span class="status-badge ${status.class}">${status.text
              }</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-icon" onclick="viewOrder('${order.ë°œì£¼ì¼ì
              }', ${order.ë°œì£¼ë²ˆí˜¸})">ìƒì„¸</button>
                                </div>
                            </td>
                        `;
            tbody.appendChild(tr);
          });
        }
      } catch (error) {
        console.error('ë°œì£¼ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
        const tbody = document.getElementById('orderTableBody');
        tbody.innerHTML = `<tr><td colspan="8" class="loading" style="color: red;">ì˜¤ë¥˜: ${error.message}</td></tr>`;
      }
    }

    // ì„œë¸Œë©”ë‰´ í† ê¸€
    function toggleSubmenu(element) {
      element.classList.toggle('open');
      const submenu = element.nextElementSibling;
      submenu.classList.toggle('open');
    }

    // í˜ì´ì§€ ì „í™˜
    function showPage(pageName) {
      document.querySelectorAll('.page-content').forEach((page) => {
        page.classList.remove('active');
      });

      document.querySelectorAll('.menu-link').forEach((link) => {
        link.classList.remove('active');
      });
      document.querySelectorAll('.submenu-link').forEach((link) => {
        link.classList.remove('active');
      });

      const pageMap = {
        dashboard: {
          element: 'dashboardPage',
          title: 'ëŒ€ì‹œë³´ë“œ',
          menu: null,
          loadFunc: loadDashboardStats,
        },
        supplier: {
          element: 'supplierPage',
          title: 'ë§¤ì…ì²˜ê´€ë¦¬',
          menu: 'purchase',
          loadFunc: loadSuppliers,
        },
        order: {
          element: 'orderPage',
          title: 'ë°œì£¼ê´€ë¦¬',
          menu: 'purchase',
          loadFunc: loadOrders,
        },
        purchase: {
          element: 'purchasePage',
          title: 'ë§¤ì…ì „í‘œê´€ë¦¬',
          menu: 'purchase',
          loadFunc: null,
        },
        customer: {
          element: 'customerPage',
          title: 'ë§¤ì¶œì²˜ê´€ë¦¬',
          menu: 'sales',
          loadFunc: null, // âœ… customer.jsì˜ DataTableì´ ìë™ìœ¼ë¡œ ë¡œë“œ
        },
        quotation: {
          element: 'quotationPage',
          title: 'ê²¬ì ê´€ë¦¬',
          menu: 'sales',
          loadFunc: null, // âœ… quotation.jsì˜ DataTableì´ ìë™ìœ¼ë¡œ ë¡œë“œ
        },
        transaction: {
          element: 'transactionPage',
          title: 'ê±°ë˜ëª…ì„¸ì„œê´€ë¦¬',
          menu: 'sales',
          loadFunc: null,
        },
      };

      if (pageMap[pageName]) {
        document.getElementById(pageMap[pageName].element).classList.add('active');
        document.getElementById('pageTitle').textContent = pageMap[pageName].title;

        if (pageMap[pageName].menu === 'purchase') {
          document.getElementById('purchaseMenu').classList.add('open');
          document.getElementById('purchaseSubmenu').classList.add('open');
        } else if (pageMap[pageName].menu === 'sales') {
          document.getElementById('salesMenu').classList.add('open');
          document.getElementById('salesSubmenu').classList.add('open');
        }

        // í˜ì´ì§€ë³„ ë°ì´í„° ë¡œë“œ
        if (currentUser && pageMap[pageName].loadFunc) {
          pageMap[pageName].loadFunc();
        }
      }
    }

    // ë¡œê·¸ì•„ì›ƒ
    async function logout() {
      if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        try {
          await apiCall('/auth/logout', 'POST', { userId: currentUser.ì‚¬ìš©ìì½”ë“œ });
        } catch (error) {
          console.error('ë¡œê·¸ì•„ì›ƒ ì—ëŸ¬:', error);
        }

        currentUser = null;
        document.getElementById('dashboard').classList.remove('active');
        document.getElementById('loginPage').style.display = 'flex';
        document.getElementById('loginForm').reset();
        document.getElementById('loginMessage').classList.remove('show');
      }
    }

    // ìƒì„¸ ì¡°íšŒ í•¨ìˆ˜ë“¤
    // ==================== ë§¤ì¶œì²˜ ìƒì„¸ë³´ê¸°/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥ ====================

    // ë§¤ì¶œì²˜ ìƒì„¸ë³´ê¸°
    async function viewCustomerDetail(customerCode) {
      try {
        const result = await apiCall(`/customers/${customerCode}`);

        if (!result.success) {
          alert('ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        const data = result.data;

        // ìƒì„¸ ì •ë³´ HTML ìƒì„±
        const detailHtml = `
          <div style="grid-column: 1 / -1; padding: 12px; background: #f8f9fa; border-radius: 8px;">
            <strong>ë§¤ì¶œì²˜ì½”ë“œ:</strong> ${data.ë§¤ì¶œì²˜ì½”ë“œ}
          </div>
          <div style="padding: 12px;">
            <strong>ë§¤ì¶œì²˜ëª…</strong><br/>
            ${data.ë§¤ì¶œì²˜ëª… || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ëŒ€í‘œìëª…</strong><br/>
            ${data.ëŒ€í‘œìëª… || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ì‚¬ì—…ìë²ˆí˜¸</strong><br/>
            ${data.ì‚¬ì—…ìë²ˆí˜¸ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ë²•ì¸ë²ˆí˜¸</strong><br/>
            ${data.ë²•ì¸ë²ˆí˜¸ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ì „í™”ë²ˆí˜¸</strong><br/>
            ${data.ì „í™”ë²ˆí˜¸ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>íŒ©ìŠ¤ë²ˆí˜¸</strong><br/>
            ${data.íŒ©ìŠ¤ë²ˆí˜¸ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ì—…íƒœ</strong><br/>
            ${data.ì—…íƒœ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ì—…ì¢…</strong><br/>
            ${data.ì—…ì¢… || '-'}
          </div>
          <div style="grid-column: 1 / -1; padding: 12px;">
            <strong>ì£¼ì†Œ</strong><br/>
            ${data.ì£¼ì†Œ || ''} ${data.ë²ˆì§€ || ''}
          </div>
          <div style="padding: 12px;">
            <strong>ì€í–‰</strong><br/>
            ${data.ì€í–‰ì½”ë“œ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ê³„ì¢Œë²ˆí˜¸</strong><br/>
            ${data.ê³„ì¢Œë²ˆí˜¸ || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ë‹´ë‹¹ìëª…</strong><br/>
            ${data.ë‹´ë‹¹ìëª… || '-'}
          </div>
          <div style="padding: 12px;">
            <strong>ê±°ë˜ìƒíƒœ</strong><br/>
            <span class="status-badge ${data.ì‚¬ìš©êµ¬ë¶„ === 0 ? 'status-active' : 'status-pending'}">
              ${data.ì‚¬ìš©êµ¬ë¶„ === 0 ? 'ì •ìƒê±°ë˜' : 'ê±°ë˜ë³´ë¥˜'}
            </span>
          </div>
          <div style="grid-column: 1 / -1; padding: 12px;">
            <strong>ë¹„ê³ </strong><br/>
            ${data.ë¹„ê³ ë€ || '-'}
          </div>
        `;

        document.getElementById('customerDetailContent').innerHTML = detailHtml;
        document.getElementById('customerDetailModal').style.display = 'flex';
      } catch (error) {
        console.error('ë§¤ì¶œì²˜ ìƒì„¸ ì¡°íšŒ ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    }

    // ë§¤ì¶œì²˜ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ë‹«ê¸°
    function closeCustomerDetailModal() {
      document.getElementById('customerDetailModal').style.display = 'none';
    }

    // ë§¤ì¶œì²˜ ìˆ˜ì •
    async function editCustomer(customerCode) {
      try {
        // 1. ë§¤ì¶œì²˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ
        const result = await apiCall(`/customers/${customerCode}`);

        if (!result.success) {
          alert('ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        const data = result.data;

        // 2. ëª¨ë‹¬ ì—´ê¸°
        const modal = document.getElementById('customerModal');
        if (!modal) {
          console.error('ë§¤ì¶œì²˜ ëª¨ë‹¬ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        // 3. ëª¨ë‹¬ ì œëª© ë³€ê²½
        const modalTitle = modal.querySelector('h2');
        if (modalTitle) {
          modalTitle.textContent = 'ë§¤ì¶œì²˜ ìˆ˜ì •';
        }

        // 4. í¼ í•„ë“œì— ë°ì´í„° ì±„ìš°ê¸°
        document.getElementById('customerCode').value = data.ë§¤ì¶œì²˜ì½”ë“œ;
        document.getElementById('customerName').value = data.ë§¤ì¶œì²˜ëª… || '';
        document.getElementById('ceoName').value = data.ëŒ€í‘œìëª… || '';
        document.getElementById('businessNo').value = data.ì‚¬ì—…ìë²ˆí˜¸ || '';
        document.getElementById('businessType').value = data.ì—…íƒœ || '';
        document.getElementById('businessCategory').value = data.ì—…ì¢… || '';
        document.getElementById('phone').value = data.ì „í™”ë²ˆí˜¸ || '';
        document.getElementById('fax').value = data.íŒ©ìŠ¤ë²ˆí˜¸ || '';
        document.getElementById('zipCode').value = data.ìš°í¸ë²ˆí˜¸ || '';
        document.getElementById('address').value = data.ì£¼ì†Œ || '';
        document.getElementById('addressDetail').value = data.ë²ˆì§€ || '';
        document.getElementById('bankCode').value = data.ì€í–‰ì½”ë“œ || '';
        document.getElementById('accountNo').value = data.ê³„ì¢Œë²ˆí˜¸ || '';
        document.getElementById('managerName').value = data.ë‹´ë‹¹ìëª… || '';
        document.getElementById('status').value = data.ì‚¬ìš©êµ¬ë¶„ || 0;
        document.getElementById('remark').value = data.ë¹„ê³ ë€ || '';

        // 5. í¼ì— ìˆ˜ì • ëª¨ë“œ í‘œì‹œë¥¼ ìœ„í•œ ë°ì´í„° ì†ì„± ì¶”ê°€
        const form = document.getElementById('customerForm');
        form.dataset.mode = 'edit';
        form.dataset.code = customerCode;

        // 6. ëª¨ë‹¬ í‘œì‹œ
        modal.style.display = 'flex';
      } catch (error) {
        console.error('ë§¤ì¶œì²˜ ìˆ˜ì • ì¤€ë¹„ ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    }

    // ë§¤ì¶œì²˜ ë“±ë¡/ìˆ˜ì • í¼ ì œì¶œ
    async function submitCustomer(event) {
      event.preventDefault();

      try {
        const form = document.getElementById('customerForm');
        const isEditMode = form.dataset.mode === 'edit';
        const customerCode = form.dataset.code;

        // í¼ ë°ì´í„° ìˆ˜ì§‘
        const formData = {
          ë§¤ì¶œì²˜ëª…: document.getElementById('customerName').value,
          ì‚¬ì—…ìë²ˆí˜¸: document.getElementById('businessNo').value,
          ëŒ€í‘œìëª…: document.getElementById('ceoName').value,
          ì—…íƒœ: document.getElementById('businessType').value,
          ì—…ì¢…: document.getElementById('businessCategory').value,
          ì „í™”ë²ˆí˜¸: document.getElementById('phone').value,
          íŒ©ìŠ¤ë²ˆí˜¸: document.getElementById('fax').value,
          ìš°í¸ë²ˆí˜¸: document.getElementById('zipCode').value,
          ì£¼ì†Œ: document.getElementById('address').value,
          ë²ˆì§€: document.getElementById('addressDetail').value,
          ì€í–‰ì½”ë“œ: document.getElementById('bankCode').value,
          ê³„ì¢Œë²ˆí˜¸: document.getElementById('accountNo').value,
          ë‹´ë‹¹ìëª…: document.getElementById('managerName').value,
          ì‚¬ìš©êµ¬ë¶„: parseInt(document.getElementById('status').value),
          ë¹„ê³ ë€: document.getElementById('remark').value,
        };

        let result;

        if (isEditMode) {
          // ìˆ˜ì • ëª¨ë“œ
          result = await apiCall(`/customers/${customerCode}`, 'PUT', formData);
        } else {
          // ì‹ ê·œ ë“±ë¡ ëª¨ë“œ
          formData.ë§¤ì¶œì²˜ì½”ë“œ = document.getElementById('customerCode').value;
          result = await apiCall('/customers', 'POST', formData);
        }

        if (result.success) {
          alert(isEditMode ? 'ë§¤ì¶œì²˜ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ë§¤ì¶œì²˜ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
          closeCustomerModal();

          // DataTable ìƒˆë¡œê³ ì¹¨
          try {
            $('#customerTable').DataTable().ajax.reload(null, false);
          } catch (e) {
            console.warn('DataTable ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', e);
          }
        } else {
          alert('ì˜¤ë¥˜: ' + (result.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
        }
      } catch (error) {
        console.error('ë§¤ì¶œì²˜ ì €ì¥ ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    // ë§¤ì¶œì²˜ ëª¨ë‹¬ ë‹«ê¸°
    function closeCustomerModal() {
      const modal = document.getElementById('customerModal');
      if (modal) {
        modal.style.display = 'none';

        // í¼ ì´ˆê¸°í™”
        const form = document.getElementById('customerForm');
        form.reset();
        delete form.dataset.mode;
        delete form.dataset.code;

        // ëª¨ë‹¬ ì œëª© ë³µì›
        const modalTitle = modal.querySelector('h2');
        if (modalTitle) {
          modalTitle.textContent = 'ë§¤ì¶œì²˜ ì‹ ê·œë“±ë¡';
        }
      }
    }

    // ë§¤ì¶œì²˜ ì‚­ì œ (ëª¨ë‹¬ ì—´ê¸°)
    async function deleteCustomer(customerCode) {
      try {
        console.log('===== ë§¤ì¶œì²˜ ì‚­ì œ ëª¨ë‹¬ ì—´ê¸° =====');
        console.log('ë§¤ì¶œì²˜ì½”ë“œ:', customerCode);

        // 1. API í˜¸ì¶œë¡œ ë§¤ì¶œì²˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const result = await apiCall(`/customers/${customerCode}`, 'GET');

        if (!result.success || !result.data) {
          throw new Error(result.message || 'ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        const customer = result.data;
        console.log('âœ… ë§¤ì¶œì²˜ ì •ë³´ ë¡œë“œ ì„±ê³µ:', customer);

        // 2. ì‚­ì œí•  ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ëª¨ë‹¬ì— í‘œì‹œ
        const deleteContent = document.getElementById('customerDeleteContent');
        deleteContent.innerHTML = `
          <div style="
                background: #f8f9fa;
                border: 1px solid var(--border);
                border-radius: 8px;
                padding: 20px;
              ">
            <div style="margin-bottom: 12px;">
              <span style="font-weight: 500; color: var(--text-gray); font-size: 14px;">ë§¤ì¶œì²˜ì½”ë“œ</span>
              <p style="margin: 4px 0 0 0; font-size: 16px; font-weight: 600; color: var(--text-dark);">${customer.ë§¤ì¶œì²˜ì½”ë“œ}</p>
            </div>
            <div style="margin-bottom: 12px;">
              <span style="font-weight: 500; color: var(--text-gray); font-size: 14px;">ë§¤ì¶œì²˜ëª…</span>
              <p style="margin: 4px 0 0 0; font-size: 16px; font-weight: 600; color: var(--text-dark);">${customer.ë§¤ì¶œì²˜ëª…}</p>
            </div>
            <div style="margin-bottom: 12px;">
              <span style="font-weight: 500; color: var(--text-gray); font-size: 14px;">ëŒ€í‘œì</span>
              <p style="margin: 4px 0 0 0; font-size: 14px; color: var(--text-dark);">${customer.ëŒ€í‘œìëª… || '-'}</p>
            </div>
            <div>
              <span style="font-weight: 500; color: var(--text-gray); font-size: 14px;">ì‚¬ì—…ìë²ˆí˜¸</span>
              <p style="margin: 4px 0 0 0; font-size: 14px; color: var(--text-dark);">${customer.ì‚¬ì—…ìë²ˆí˜¸ || '-'}</p>
            </div>
          </div>
        `;

        // 3. ëª¨ë‹¬ì— ë§¤ì¶œì²˜ì½”ë“œ ì €ì¥ (ì‚­ì œ ì‹œ ì‚¬ìš©)
        document.getElementById('customerDeleteModal').setAttribute('data-customer-code', customerCode);

        // 4. ëª¨ë‹¬ í‘œì‹œ
        document.getElementById('customerDeleteModal').style.display = 'flex';
        console.log('âœ… ì‚­ì œ ëª¨ë‹¬ í‘œì‹œ ì™„ë£Œ');
      } catch (error) {
        console.error('âŒ ë§¤ì¶œì²˜ ì‚­ì œ ëª¨ë‹¬ ì—´ê¸° ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    // ë§¤ì¶œì²˜ ì‚­ì œ ëª¨ë‹¬ ë‹«ê¸°
    function closeCustomerDeleteModal() {
      document.getElementById('customerDeleteModal').style.display = 'none';
      document.getElementById('customerDeleteContent').innerHTML = '';
      document.getElementById('customerDeleteModal').removeAttribute('data-customer-code');
      console.log('âœ… ì‚­ì œ ëª¨ë‹¬ ë‹«ê¸° ì™„ë£Œ');
    }

    // ë§¤ì¶œì²˜ ì‚­ì œ í™•ì¸ (ì‹¤ì œ ì‚­ì œ)
    async function confirmDeleteCustomer() {
      try {
        const customerCode = document.getElementById('customerDeleteModal').getAttribute('data-customer-code');

        if (!customerCode) {
          throw new Error('ì‚­ì œí•  ë§¤ì¶œì²˜ ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.');
        }

        console.log('===== ë§¤ì¶œì²˜ ì‚­ì œ ì‹¤í–‰ =====');
        console.log('ë§¤ì¶œì²˜ì½”ë“œ:', customerCode);

        // 1. API í˜¸ì¶œë¡œ ë§¤ì¶œì²˜ ì‚­ì œ
        const result = await apiCall(`/customers/${customerCode}`, 'DELETE');

        if (!result.success) {
          throw new Error(result.message || 'ë§¤ì¶œì²˜ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }

        console.log('âœ… ë§¤ì¶œì²˜ ì‚­ì œ ì„±ê³µ:', result);

        // 2. ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        alert('ë§¤ì¶œì²˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');

        // 3. ëª¨ë‹¬ ë‹«ê¸°
        closeCustomerDeleteModal();

        // 4. ëª©ë¡ ìƒˆë¡œê³ ì¹¨ (DataTable)
        try {
          $('#customerTable').DataTable().ajax.reload(null, false);
          console.log('âœ… ë§¤ì¶œì²˜ ëª©ë¡ ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ');
        } catch (e) {
          console.warn('âš ï¸ DataTable ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨ (ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ í•„ìš”):', e);
        }
      } catch (error) {
        console.error('âŒ ë§¤ì¶œì²˜ ì‚­ì œ ì˜¤ë¥˜:', error);
        alert('ë§¤ì¶œì²˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    // ì‹ ê·œ ë§¤ì¶œì²˜ ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°
    async function openNewCustomerModal() {
      try {
        console.log('===== ì‹ ê·œ ë§¤ì¶œì²˜ ë“±ë¡ ëª¨ë‹¬ ì—´ê¸° =====');

        // 1. ì„œë²„ì—ì„œ ìƒˆë¡œìš´ ë§¤ì¶œì²˜ì½”ë“œ ìƒì„± ìš”ì²­
        const result = await apiCall('/customer_new', 'GET');

        if (!result.success || !result.data) {
          throw new Error(result.message || 'ë§¤ì¶œì²˜ì½”ë“œë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        const newCustomerCode = result.data.ë§¤ì¶œì²˜ì½”ë“œ;
        console.log('âœ… ìƒì„±ëœ ë§¤ì¶œì²˜ì½”ë“œ:', newCustomerCode);

        // 2. ëª¨ë‹¬ ì—´ê¸°
        const modal = document.getElementById('customerModal');
        if (!modal) {
          throw new Error('ëª¨ë‹¬ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        // 3. í¼ ì´ˆê¸°í™”
        const form = document.getElementById('customerForm');
        form.reset();
        form.removeAttribute('data-mode');
        form.removeAttribute('data-customer-code');

        // 4. ëª¨ë‹¬ ì œëª© ì„¤ì •
        const modalTitle = modal.querySelector('h2');
        if (modalTitle) {
          modalTitle.textContent = 'ë§¤ì¶œì²˜ ì‹ ê·œë“±ë¡';
        }

        // 5. ìë™ ìƒì„±ëœ ë§¤ì¶œì²˜ì½”ë“œ ì„¤ì •
        document.getElementById('customerCode').value = newCustomerCode;
        document.getElementById('customerCode').readOnly = true;

        // 6. ëª¨ë‹¬ í‘œì‹œ
        modal.style.display = 'flex';

        console.log('âœ… ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ ì—´ê¸° ì™„ë£Œ');
      } catch (error) {
        console.error('âŒ ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ ì—´ê¸° ì˜¤ë¥˜:', error);
        alert('ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    // Google Sheetsë¡œ ë‚´ë³´ë‚´ê¸° (CSV ë‹¤ìš´ë¡œë“œ)
    function exportCustomersToGoogleSheets() {
      try {
        console.log('===== Google Sheetsë¡œ ë‚´ë³´ë‚´ê¸° ì‹œì‘ =====');

        // 1. DataTableì—ì„œ ì„ íƒëœ í–‰ ê°€ì ¸ì˜¤ê¸°
        const table = $('#customerTable').DataTable();
        const selectedRows = [];

        // ì²´í¬ë°•ìŠ¤ê°€ ì„ íƒëœ í–‰ë§Œ ê°€ì ¸ì˜¤ê¸°
        $('.customerCheckbox:checked').each(function () {
          const customerCode = $(this).data('code');
          const rowData = table.rows().data().toArray().find(row => row.ë§¤ì¶œì²˜ì½”ë“œ === customerCode);
          if (rowData) {
            selectedRows.push(rowData);
          }
        });

        // ì„ íƒëœ í–‰ì´ ì—†ìœ¼ë©´ ì „ì²´ ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        let dataToExport = selectedRows.length > 0 ? selectedRows : table.rows().data().toArray();

        if (dataToExport.length === 0) {
          alert('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        console.log(`âœ… ë‚´ë³´ë‚¼ ë°ì´í„° ìˆ˜: ${dataToExport.length}ê±´`);

        // 2. CSV í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        const headers = ['ë§¤ì¶œì²˜ì½”ë“œ', 'ë§¤ì¶œì²˜ëª…', 'ëŒ€í‘œì', 'ì‚¬ì—…ìë²ˆí˜¸', 'ì—°ë½ì²˜', 'ê±°ë˜ìƒíƒœ', 'ë“±ë¡ì¼'];
        let csvContent = '\uFEFF'; // UTF-8 BOM ì¶”ê°€ (ì—‘ì…€ì—ì„œ í•œê¸€ ê¹¨ì§ ë°©ì§€)
        csvContent += headers.join(',') + '\n';

        dataToExport.forEach(row => {
          const rowArray = [
            row.ë§¤ì¶œì²˜ì½”ë“œ || '',
            row.ë§¤ì¶œì²˜ëª… || '',
            row.ëŒ€í‘œìëª… || '',
            row.ì‚¬ì—…ìë²ˆí˜¸ || '',
            row.ì „í™”ë²ˆí˜¸ || '',
            row.ì‚¬ìš©êµ¬ë¶„ === 0 ? 'ì •ìƒê±°ë˜' : 'ê±°ë˜ë³´ë¥˜',
            row.ë“±ë¡ì¼ì || ''
          ];

          // CSV íŠ¹ìˆ˜ë¬¸ì ì²˜ë¦¬ (ì‰¼í‘œ, ë”°ì˜´í‘œ, ì¤„ë°”ê¿ˆ ìˆìœ¼ë©´ í°ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°)
          const csvRow = rowArray.map(field => {
            const fieldStr = String(field);
            if (fieldStr.includes(',') || fieldStr.includes('"') || fieldStr.includes('\n')) {
              return '"' + fieldStr.replace(/"/g, '""') + '"';
            }
            return fieldStr;
          });

          csvContent += csvRow.join(',') + '\n';
        });

        // 3. Blob ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');

        if (link.download !== undefined) {
          const url = URL.createObjectURL(blob);
          const today = new Date().toISOString().slice(0, 10).replace(/-/g, '');
          const filename = `ë§¤ì¶œì²˜ê´€ë¦¬_${today}.csv`;

          link.setAttribute('href', url);
          link.setAttribute('download', filename);
          link.style.visibility = 'hidden';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);

          console.log('âœ… CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ:', filename);
          alert(`CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nGoogle Sheetsì—ì„œ:\n1. íŒŒì¼ > ê°€ì ¸ì˜¤ê¸°\n2. ì—…ë¡œë“œ íƒ­ ì„ íƒ\n3. ë‹¤ìš´ë¡œë“œëœ CSV íŒŒì¼ ì„ íƒ\n4. ê°€ì ¸ì˜¤ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”.`);
        }
      } catch (error) {
        console.error('âŒ CSV ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
        alert('CSV íŒŒì¼ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    // ê¸°ì¡´ viewCustomer í•¨ìˆ˜ (í˜¸í™˜ì„± ìœ ì§€)
    async function viewCustomer(id) {
      // ìƒˆë¡œìš´ ìƒì„¸ë³´ê¸° í•¨ìˆ˜ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      viewCustomerDetail(id);
    }

    async function viewSupplier(id) {
      try {
        const result = await apiCall(`/suppliers/${id}`);
        if (result.success) {
          alert(
            'ë§¤ì…ì²˜ ì •ë³´:\n\n' +
            `ë§¤ì…ì²˜ëª…: ${result.data.ë§¤ì…ì²˜ëª…}\n` +
            `ëŒ€í‘œì: ${result.data.ëŒ€í‘œìëª…}\n` +
            `ì‚¬ì—…ìë²ˆí˜¸: ${result.data.ì‚¬ì—…ìë²ˆí˜¸}\n` +
            `ì „í™”ë²ˆí˜¸: ${result.data.ì „í™”ë²ˆí˜¸}\n` +
            `ì£¼ì†Œ: ${result.data.ì£¼ì†Œ} ${result.data.ë²ˆì§€}`,
          );
        }
      } catch (error) {
        alert('ë§¤ì…ì²˜ ì¡°íšŒ ì‹¤íŒ¨: ' + error.message);
      }
    }

    async function viewQuotation(date, no) {
      try {
        const result = await apiCall(`/quotations/${date}/${no}`);
        if (result.success) {
          console.log('ê²¬ì  ìƒì„¸:', result.data);
          alert('ê²¬ì  ì •ë³´ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        alert('ê²¬ì  ì¡°íšŒ ì‹¤íŒ¨: ' + error.message);
      }
    }

    async function viewOrder(date, no) {
      try {
        const result = await apiCall(`/orders/${date}/${no}`);
        if (result.success) {
          console.log('ë°œì£¼ ìƒì„¸:', result.data);
          alert('ë°œì£¼ ì •ë³´ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        alert('ë°œì£¼ ì¡°íšŒ ì‹¤íŒ¨: ' + error.message);
      }
    }

    // ==================== Google Sheets ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ ====================

    // ë§¤ì¶œì²˜ Google Sheets ë‚´ë³´ë‚´ê¸°
    function exportCustomersToExcel() {
      try {
        console.log('===== ë§¤ì¶œì²˜ Google Sheets ë‚´ë³´ë‚´ê¸° ì‹œì‘ =====');

        // ì„ íƒëœ í–‰ ê°€ì ¸ì˜¤ê¸°
        const checkboxes = document.querySelectorAll('.customerCheckbox:checked');

        if (checkboxes.length === 0) {
          alert('ì„ íƒëœ ë§¤ì¶œì²˜ê°€ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        // ì„ íƒëœ ë ˆì½”ë“œì˜ ë°ì´í„° ìˆ˜ì§‘
        const selectedData = [];
        checkboxes.forEach((checkbox) => {
          const row = checkbox.closest('tr');
          const cells = row.querySelectorAll('td');

          selectedData.push({
            ë²ˆí˜¸: cells[1].textContent.trim(),
            ë§¤ì¶œì²˜ì½”ë“œ: cells[2].textContent.trim(),
            ë§¤ì¶œì²˜ëª…: cells[3].textContent.trim(),
            ëŒ€í‘œì: cells[4].textContent.trim(),
            ì‚¬ì—…ìë²ˆí˜¸: cells[5].textContent.trim(),
            ì—°ë½ì²˜: cells[6].textContent.trim(),
            ê±°ë˜ìƒíƒœ: cells[7].textContent.trim(),
            ë“±ë¡ì¼: cells[8].textContent.trim(),
          });
        });

        console.log('ì„ íƒëœ ë°ì´í„°:', selectedData);

        // CSV í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        const headers = [
          'ë²ˆí˜¸',
          'ë§¤ì¶œì²˜ì½”ë“œ',
          'ë§¤ì¶œì²˜ëª…',
          'ëŒ€í‘œì',
          'ì‚¬ì—…ìë²ˆí˜¸',
          'ì—°ë½ì²˜',
          'ê±°ë˜ìƒíƒœ',
          'ë“±ë¡ì¼',
        ];
        let csvContent = '\uFEFF' + headers.join(',') + '\n'; // UTF-8 BOM ì¶”ê°€

        selectedData.forEach((data) => {
          const row = [
            data.ë²ˆí˜¸,
            data.ë§¤ì¶œì²˜ì½”ë“œ,
            `"${data.ë§¤ì¶œì²˜ëª…}"`, // ì‰¼í‘œê°€ í¬í•¨ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°
            data.ëŒ€í‘œì,
            data.ì‚¬ì—…ìë²ˆí˜¸,
            data.ì—°ë½ì²˜,
            data.ê±°ë˜ìƒíƒœ,
            data.ë“±ë¡ì¼,
          ];
          csvContent += row.join(',') + '\n';
        });

        // Blob ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');

        // íŒŒì¼ëª… ìƒì„±
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const date = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        const fileName = `ë§¤ì¶œì²˜_${year}${month}${date}_${hours}${minutes}${seconds}.csv`;

        // ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
        if (navigator.msSaveBlob) {
          // IE 10+
          navigator.msSaveBlob(blob, fileName);
        } else {
          link.href = URL.createObjectURL(blob);
          link.download = fileName;
          link.style.display = 'none';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        console.log('âœ… CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ:', fileName);

        // Google Sheets ì•ˆë‚´
        alert(
          `${selectedData.length}ê°œì˜ ë§¤ì¶œì²˜ ì •ë³´ê°€ CSVë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nğŸ“Š Google Sheetsë¡œ ê°€ì ¸ì˜¤ê¸°:\n1. sheets.google.com ì ‘ì†\n2. íŒŒì¼ > ê°€ì ¸ì˜¤ê¸° > ì—…ë¡œë“œ íƒ­\n3. ë‹¤ìš´ë¡œë“œëœ CSV íŒŒì¼ ì„ íƒ`,
        );
      } catch (error) {
        console.error('âŒ Google Sheets ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
        alert('ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }

    // ë§¤ì…ì²˜ Google Sheets ë‚´ë³´ë‚´ê¸°
    function exportSuppliersToExcel() {
      try {
        console.log('===== ë§¤ì…ì²˜ Google Sheets ë‚´ë³´ë‚´ê¸° ì‹œì‘ =====');

        // ì„ íƒëœ í–‰ ê°€ì ¸ì˜¤ê¸°
        const checkboxes = document.querySelectorAll('.supplierCheckbox:checked');

        if (checkboxes.length === 0) {
          alert('ì„ íƒëœ ë§¤ì…ì²˜ê°€ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        // ì„ íƒëœ ë ˆì½”ë“œì˜ ë°ì´í„° ìˆ˜ì§‘
        const selectedData = [];
        checkboxes.forEach((checkbox) => {
          const row = checkbox.closest('tr');
          const cells = row.querySelectorAll('td');

          selectedData.push({
            ë²ˆí˜¸: cells[1].textContent.trim(),
            ë§¤ì…ì²˜ì½”ë“œ: cells[2].textContent.trim(),
            ë§¤ì…ì²˜ëª…: cells[3].textContent.trim(),
            ëŒ€í‘œì: cells[4].textContent.trim(),
            ì‚¬ì—…ìë²ˆí˜¸: cells[5].textContent.trim(),
            ì—°ë½ì²˜: cells[6].textContent.trim(),
            ê±°ë˜ìƒíƒœ: cells[7].textContent.trim(),
            ì‘ì„±ì: cells[8].textContent.trim(),
          });
        });

        console.log('ì„ íƒëœ ë°ì´í„°:', selectedData);

        // CSV í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        const headers = [
          'ë²ˆí˜¸',
          'ë§¤ì…ì²˜ì½”ë“œ',
          'ë§¤ì…ì²˜ëª…',
          'ëŒ€í‘œì',
          'ì‚¬ì—…ìë²ˆí˜¸',
          'ì—°ë½ì²˜',
          'ê±°ë˜ìƒíƒœ',
          'ì‘ì„±ì',
        ];
        let csvContent = '\uFEFF' + headers.join(',') + '\n'; // UTF-8 BOM ì¶”ê°€

        selectedData.forEach((data) => {
          const row = [
            data.ë²ˆí˜¸,
            data.ë§¤ì…ì²˜ì½”ë“œ,
            `"${data.ë§¤ì…ì²˜ëª…}"`, // ì‰¼í‘œê°€ í¬í•¨ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°
            data.ëŒ€í‘œì,
            data.ì‚¬ì—…ìë²ˆí˜¸,
            data.ì—°ë½ì²˜,
            data.ê±°ë˜ìƒíƒœ,
            data.ì‘ì„±ì,
          ];
          csvContent += row.join(',') + '\n';
        });

        // Blob ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');

        // íŒŒì¼ëª… ìƒì„±
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const date = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        const fileName = `ë§¤ì…ì²˜_${year}${month}${date}_${hours}${minutes}${seconds}.csv`;

        // ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
        if (navigator.msSaveBlob) {
          // IE 10+
          navigator.msSaveBlob(blob, fileName);
        } else {
          link.href = URL.createObjectURL(blob);
          link.download = fileName;
          link.style.display = 'none';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        console.log('âœ… CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ:', fileName);

        // Google Sheets ì•ˆë‚´
        alert(
          `${selectedData.length}ê°œì˜ ë§¤ì…ì²˜ ì •ë³´ê°€ CSVë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nğŸ“Š Google Sheetsë¡œ ê°€ì ¸ì˜¤ê¸°:\n1. sheets.google.com ì ‘ì†\n2. íŒŒì¼ > ê°€ì ¸ì˜¤ê¸° > ì—…ë¡œë“œ íƒ­\n3. ë‹¤ìš´ë¡œë“œëœ CSV íŒŒì¼ ì„ íƒ`,
        );
      } catch (error) {
        console.error('âŒ Google Sheets ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
        alert('ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
    }
  }

    // ê²¬ì  Google Sheets ë‚´ë³´ë‚´ê¸°
    function exportQuotationsToExcel() {
      try {
        console.log('===== ê²¬ì  Google Sheets ë‚´ë³´ë‚´ê¸° ì‹œì‘ =====');

        const checkboxes = document.querySelectorAll('.quotationCheckbox:checked');

        if (checkboxes.length === 0) {
          alert('ë‚´ë³´ë‚¼ ê²¬ì ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.');
          return;
        }

        const selectedData = [];
        checkboxes.forEach((checkbox) => {
          const row = checkbox.closest('tr');
          if (!row) return;
          const cells = row.querySelectorAll('td');
          if (cells.length < 9) return;

          selectedData.push({
            ë²ˆí˜¸: cells[1]?.textContent.trim() || '',
            ê²¬ì ë²ˆí˜¸: cells[2]?.textContent.trim() || '',
            ë§¤ì¶œì²˜ëª…: cells[3]?.textContent.trim() || '',
            ê²¬ì ì¼ì: cells[4]?.textContent.trim() || '',
            ì¶œê³ í¬ë§ì¼: cells[5]?.textContent.trim() || '',
            ë¹„ê³ : cells[6]?.textContent.trim() || '',
            ë‹´ë‹¹ì: cells[7]?.textContent.trim() || '',
            ìƒíƒœ: cells[8]?.textContent.trim() || '',
          });
        });

        if (selectedData.length === 0) {
          alert('ì„ íƒí•œ ê²¬ì  í–‰ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
          return;
        }

        const headers = [
          'ë²ˆí˜¸',
          'ê²¬ì ë²ˆí˜¸',
          'ë§¤ì¶œì²˜ëª…',
          'ê²¬ì ì¼ì',
          'ì¶œê³ í¬ë§ì¼',
          'ë¹„ê³ ',
          'ë‹´ë‹¹ì',
          'ìƒíƒœ',
        ];

        const escapeCsv = (value) => {
          const text = (value ?? '').replace(/"/g, '""');
          return `"${text}"`;
        };

        let csvContent = '\uFEFF' + headers.join(',') + '\n';
        selectedData.forEach((item) => {
          const row = [
            item.ë²ˆí˜¸,
            item.ê²¬ì ë²ˆí˜¸,
            item.ë§¤ì¶œì²˜ëª…,
            item.ê²¬ì ì¼ì,
            item.ì¶œê³ í¬ë§ì¼,
            item.ë¹„ê³ ,
            item.ë‹´ë‹¹ì,
            item.ìƒíƒœ,
          ].map(escapeCsv);
          csvContent += row.join(',') + '\n';
        });

        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');

        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const date = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        const fileName = `ê²¬ì _${year}${month}${date}_${hours}${minutes}${seconds}.csv`;

        if (navigator.msSaveBlob) {
          navigator.msSaveBlob(blob, fileName);
        } else {
          link.href = URL.createObjectURL(blob);
          link.download = fileName;
          link.style.display = 'none';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        console.log('CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ:', fileName);
        alert(
          `${selectedData.length}ê°œì˜ ê²¬ì  ì •ë³´ê°€ CSVë¡œ ë‚´ë ¤ë°›ì•„ì¡ŒìŠµë‹ˆë‹¤.\n\nGoogle Sheetsì—ì„œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´:\n1. sheets.google.com ì ‘ì†\n2. íŒŒì¼ > ê°€ì ¸ì˜¤ê¸° > ì—…ë¡œë“œ\n3. ë°©ê¸ˆ ë‹¤ìš´ë¡œë“œí•œ CSV íŒŒì¼ ì„ íƒ`,
        );
      } catch (error) {
        console.error('ê²¬ì  Google Sheets ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
        alert('ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
      }
    }
  </script>

  <!-- HTMLì˜ </body> ì§ì „ì— ëª¨ë‹¬ HTML ì¶”ê°€ -->

  <!-- ë§¤ì¶œì²˜ ì‹ ê·œë“±ë¡ ëª¨ë‹¬ -->
  <div id="customerModal" style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      ">
    <div style="
          background: white;
          border-radius: 12px;
          padding: 32px;
          width: 90%;
          max-width: 600px;
          max-height: 90vh;
          overflow-y: auto;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        ">
      <!-- ê³ ì •ëœ ì œëª© ì˜ì—­ -->
      <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            position: sticky;
            top: -32px;
            background: white;
            padding: 0 0 16px 0;
            border-bottom: 2px solid var(--border);
            z-index: 10;
          ">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: var(--text-dark)">
          ë§¤ì¶œì²˜ ì‹ ê·œë“±ë¡
        </h2>
        <button onclick="closeCustomerModal()" style="
              background: #f0f0f0;
              border: none;
              font-size: 24px;
              cursor: pointer;
              color: #666;
              width: 36px;
              height: 36px;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: all 0.2s ease;
            " onmouseover="this.style.background='#e0e0e0'; this.style.color='#333';" onmouseout="this.style.background='#f0f0f0'; this.style.color='#666';">
          Ã—
        </button>
      </div>

      <form id="customerForm" onsubmit="submitCustomer(event)">
        <!-- 1. ë§¤ì¶œì²˜ì½”ë“œ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë§¤ì¶œì²˜ì½”ë“œ</label>
          <input type="text" id="customerCode" name="customerCode" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ìë™ìƒì„±" />
        </div>

        <!-- 2. ë§¤ì¶œì²˜ëª… (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë§¤ì¶œì²˜ëª… *</label>
          <input type="text" id="customerName" name="customerName" required style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ë§¤ì¶œì²˜ëª…" />
        </div>

        <!-- 3. ëŒ€í‘œìëª… (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ëŒ€í‘œìëª…</label>
          <input type="text" id="ceoName" name="ceoName" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ëŒ€í‘œìëª…" />
        </div>

        <!-- 4. ì‚¬ì—…ìë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì‚¬ì—…ìë²ˆí˜¸</label>
          <input type="text" id="businessNo" name="businessNo" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="000-00-00000" />
        </div>

        <!-- 5. ì—…íƒœ & ì—…ì¢… (1:1 ë¹„ìœ¨) -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px">
          <div>
            <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì—…íƒœ</label>
            <input type="text" id="businessType" name="businessType" style="
                  width: 100%;
                  padding: 12px 16px;
                  border: 2px solid var(--border);
                  border-radius: 8px;
                  font-size: 14px;
                " placeholder="ì—…íƒœ" />
          </div>
          <div>
            <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì—…ì¢…</label>
            <input type="text" id="businessCategory" name="businessCategory" style="
                  width: 100%;
                  padding: 12px 16px;
                  border: 2px solid var(--border);
                  border-radius: 8px;
                  font-size: 14px;
                " placeholder="ì—…ì¢…" />
          </div>
        </div>

        <!-- 6. ì—°ë½ì²˜ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì—°ë½ì²˜</label>
          <input type="tel" id="phone" name="phone" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="010-0000-0000" />
        </div>

        <!-- 7. íŒ©ìŠ¤ë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">íŒ©ìŠ¤ë²ˆí˜¸</label>
          <input type="tel" id="fax" name="fax" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="02-0000-0000" />
        </div>

        <!-- 8. ìš°í¸ë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„, ì°¾ê¸° ë²„íŠ¼ í¬í•¨) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ìš°í¸ë²ˆí˜¸</label>
          <div style="display: flex; gap: 8px">
            <input type="text" id="zipCode" name="zipCode" readonly style="
                  flex: 1;
                  padding: 12px 16px;
                  border: 2px solid var(--border);
                  border-radius: 8px;
                  font-size: 14px;
                  background-color: #f5f5f5;
                " placeholder="00000" />
            <button type="button" onclick="execDaumPostcode()" style="
                  padding: 10px 20px;
                  background: var(--primary);
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                  white-space: nowrap;
                ">
              ì°¾ê¸°
            </button>
          </div>
        </div>

        <!-- 9. ì£¼ì†Œ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì£¼ì†Œ</label>
          <input type="text" id="address" name="address" readonly style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                background-color: #f5f5f5;
              " placeholder="ì£¼ì†Œ" />
        </div>

        <!-- 10. ìƒì„¸ì£¼ì†Œ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ìƒì„¸ì£¼ì†Œ</label>
          <input type="text" id="addressDetail" name="addressDetail" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ìƒì„¸ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <!-- 11. ì€í–‰ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì€í–‰</label>
          <select id="bankCode" name="bankCode" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              ">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
            <option value="01">í•œêµ­ì€í–‰</option>
            <option value="02">ì‚°ì—…ì€í–‰</option>
            <option value="03">ê¸°ì—…ì€í–‰</option>
            <option value="04">êµ­ë¯¼ì€í–‰</option>
            <option value="05">ë†í˜‘</option>
            <option value="06">í•˜ë‚˜ì€í–‰</option>
            <option value="07">ìš°ë¦¬ì€í–‰</option>
            <option value="08">SCì€í–‰</option>
            <option value="09">ì”¨í‹°ì€í–‰</option>
          </select>
        </div>

        <!-- 12. ê³„ì¢Œë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ê³„ì¢Œë²ˆí˜¸</label>
          <input type="text" id="accountNo" name="accountNo" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ê³„ì¢Œë²ˆí˜¸" />
        </div>

        <!-- 13. ë‹´ë‹¹ìëª… (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë‹´ë‹¹ìëª…</label>
          <input type="text" id="managerName" name="managerName" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ë‹´ë‹¹ìëª…" />
        </div>

        <!-- 14. ê±°ë˜ìƒíƒœ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ê±°ë˜ìƒíƒœ</label>
          <select id="status" name="status" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              ">
            <option value="0">ì •ìƒê±°ë˜</option>
            <option value="1">ê±°ë˜ë³´ë¥˜</option>
          </select>
        </div>

        <!-- 15. ë¹„ê³ ë€ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 24px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë¹„ê³ ë€</label>
          <textarea id="remark" name="remark" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                resize: vertical;
                min-height: 80px;
              " placeholder="ë¹„ê³ "></textarea>
        </div>

        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div style="display: flex; gap: 12px; justify-content: flex-end">
          <button type="button" onclick="closeCustomerModal()" style="
                padding: 10px 24px;
                background: var(--bg-light);
                border: 1px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                color: var(--text-dark);
              ">
            ì·¨ì†Œ
          </button>
          <button type="submit" style="
                padding: 10px 24px;
                background: var(--primary);
                border: none;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                color: white;
              ">
            ë“±ë¡
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ë§¤ì¶œì²˜ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
  <div id="customerDeleteModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
      <!-- í—¤ë” -->
      <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            position: sticky;
            top: -32px;
            background: white;
            padding: 0 0 16px 0;
            border-bottom: 2px solid var(--border);
            z-index: 10;
          ">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: var(--text-dark)">
          ë§¤ì¶œì²˜ ì‚­ì œ
        </h2>
        <button onclick="closeCustomerDeleteModal()" style="
              background: #f0f0f0;
              border: none;
              font-size: 24px;
              cursor: pointer;
              color: #666;
              width: 36px;
              height: 36px;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: all 0.2s ease;
            " onmouseover="this.style.background='#e0e0e0'; this.style.color='#333';" onmouseout="this.style.background='#f0f0f0'; this.style.color='#666';">
          Ã—
        </button>
      </div>

      <!-- ì‚­ì œí•  ë§¤ì¶œì²˜ ì •ë³´ í‘œì‹œ -->
      <div id="customerDeleteContent" style="margin-bottom: 24px;">
        <!-- ë§¤ì¶œì²˜ ì •ë³´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
      </div>

      <!-- ê²½ê³  ë©”ì‹œì§€ -->
      <div style="
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
          ">
        <p style="margin: 0; color: #856404; font-size: 14px; line-height: 1.6;">
          <strong>âš ï¸ ê²½ê³ :</strong> ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
          ì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        </p>
      </div>

      <!-- ë²„íŠ¼ ì˜ì—­ -->
      <div style="display: flex; gap: 12px; justify-content: flex-end">
        <button type="button" onclick="closeCustomerDeleteModal()" style="
              padding: 10px 24px;
              background: var(--bg-light);
              border: 1px solid var(--border);
              border-radius: 8px;
              font-size: 14px;
              font-weight: 500;
              cursor: pointer;
              color: var(--text-dark);
            ">
          ì·¨ì†Œ
        </button>
        <button type="button" onclick="confirmDeleteCustomer()" style="
              padding: 10px 24px;
              background: #dc3545;
              border: none;
              border-radius: 8px;
              font-size: 14px;
              font-weight: 500;
              cursor: pointer;
              color: white;
            ">
          ì‚­ì œ
        </button>
      </div>
    </div>
  </div>

  <!-- ë§¤ì¶œì²˜ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
  <div id="customerDetailModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 700px; max-height: 90vh; overflow-y: auto;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700;">ë§¤ì¶œì²˜ ìƒì„¸ì •ë³´</h2>
        <button onclick="closeCustomerDetailModal()" style="
          background: none; border: none; font-size: 28px; cursor: pointer; color: #999;">Ã—</button>
      </div>

      <div id="customerDetailContent" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <!-- ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
      </div>

      <div style="margin-top: 24px; display: flex; justify-content: flex-end;">
        <button onclick="closeCustomerDetailModal()" class="btn btn-secondary">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ê²¬ì ì„œ ì‘ì„±/ìˆ˜ì • ëª¨ë‹¬ -->
  <div id="quotationModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
      <!-- í—¤ë” -->
      <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            position: sticky;
            top: -32px;
            background: white;
            padding: 0 0 16px 0;
            border-bottom: 2px solid var(--border);
            z-index: 10;
          ">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: var(--text-dark)" id="quotationModalTitle">
          ê²¬ì ì„œ ì‘ì„±
        </h2>
        <button onclick="closeQuotationModal()" style="
              background: #f0f0f0;
              border: none;
              font-size: 24px;
              cursor: pointer;
              color: #666;
              width: 36px;
              height: 36px;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              transition: all 0.2s ease;
            " onmouseover="this.style.background='#e0e0e0'; this.style.color='#333';" onmouseout="this.style.background='#f0f0f0'; this.style.color='#666';">
          Ã—
        </button>
      </div>

      <form id="quotationForm" onsubmit="submitQuotation(event)">
        <!-- ë§ˆìŠ¤í„° ì •ë³´ ì„¹ì…˜ -->
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 24px;">
          <h3 style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600;">ê¸°ë³¸ ì •ë³´</h3>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <!-- ê²¬ì ì¼ì -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px;">ê²¬ì ì¼ì *</label>
              <input type="date" id="quotationDate" required style="
                    width: 100%;
                    padding: 12px 16px;
                    border: 2px solid var(--border);
                    border-radius: 8px;
                    font-size: 14px;
                  " />
            </div>

            <!-- ì¶œê³ í¬ë§ì¼ì -->
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px;">ì¶œê³ í¬ë§ì¼ì</label>
              <input type="date" id="deliveryDate" style="
                    width: 100%;
                    padding: 12px 16px;
                    border: 2px solid var(--border);
                    border-radius: 8px;
                    font-size: 14px;
                  " />
            </div>

            <!-- ë§¤ì¶œì²˜ ì„ íƒ -->
            <div style="grid-column: 1 / -1;">
              <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px;">ë§¤ì¶œì²˜ *</label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="selectedCustomerCode" readonly style="
                      width: 120px;
                      padding: 12px 16px;
                      border: 2px solid var(--border);
                      border-radius: 8px;
                      font-size: 14px;
                      background: #f5f5f5;
                    " placeholder="ì½”ë“œ" />
                <input type="text" id="selectedCustomerName" readonly required style="
                      flex: 1;
                      padding: 12px 16px;
                      border: 2px solid var(--border);
                      border-radius: 8px;
                      font-size: 14px;
                      background: #f5f5f5;
                    " placeholder="ë§¤ì¶œì²˜ë¥¼ ì„ íƒí•˜ì„¸ìš”" />
                <button type="button" onclick="openCustomerSearchModal()" style="
                      padding: 10px 20px;
                      background: var(--primary);
                      color: white;
                      border: none;
                      border-radius: 8px;
                      font-size: 14px;
                      font-weight: 500;
                      cursor: pointer;
                      white-space: nowrap;
                    ">
                  ë§¤ì¶œì²˜ ê²€ìƒ‰
                </button>
              </div>
            </div>

            <!-- ì œëª© -->
            <div style="grid-column: 1 / -1;">
              <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px;">ì œëª©</label>
              <input type="text" id="quotationTitle" style="
                    width: 100%;
                    padding: 12px 16px;
                    border: 2px solid var(--border);
                    border-radius: 8px;
                    font-size: 14px;
                  " placeholder="ê²¬ì ì„œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
            </div>

            <!-- ì ìš” -->
            <div style="grid-column: 1 / -1;">
              <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px;">ì ìš”</label>
              <textarea id="quotationRemark" style="
                    width: 100%;
                    padding: 12px 16px;
                    border: 2px solid var(--border);
                    border-radius: 8px;
                    font-size: 14px;
                    resize: vertical;
                    min-height: 80px;
                  " placeholder="ë¹„ê³ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            </div>
          </div>
        </div>

        <!-- ìƒì„¸ë‚´ì—­ ì„¹ì…˜ -->
        <div style="margin-bottom: 24px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h3 style="margin: 0; font-size: 18px; font-weight: 600;">ê²¬ì  ìƒì„¸ë‚´ì—­</h3>
            <button type="button" onclick="openMaterialSearchModal()" style="
                  padding: 8px 16px;
                  background: #007bff;
                  color: white;
                  border: none;
                  border-radius: 6px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                ">
              + ìì¬ ì¶”ê°€
            </button>
          </div>

          <!-- ìƒì„¸ë‚´ì—­ í…Œì´ë¸” -->
          <div style="overflow-x: auto; border: 1px solid var(--border); border-radius: 8px;">
            <table id="quotationDetailTable" style="width: 100%; border-collapse: collapse;">
              <thead style="background: #f8f9fa;">
                <tr>
                  <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border); width: 40px;">ìˆœë²ˆ</th>
                  <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border);">ìì¬ì½”ë“œ</th>
                  <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border);">ìì¬ëª…</th>
                  <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border);">ê·œê²©</th>
                  <th style="padding: 12px; text-align: right; border-bottom: 2px solid var(--border); width: 100px;">ìˆ˜ëŸ‰</th>
                  <th style="padding: 12px; text-align: right; border-bottom: 2px solid var(--border); width: 120px;">ë‹¨ê°€</th>
                  <th style="padding: 12px; text-align: right; border-bottom: 2px solid var(--border); width: 120px;">ê³µê¸‰ê°€</th>
                  <th style="padding: 12px; text-align: right; border-bottom: 2px solid var(--border); width: 100px;">ë¶€ê°€ì„¸</th>
                  <th style="padding: 12px; text-align: center; border-bottom: 2px solid var(--border); width: 60px;">ì‚­ì œ</th>
                </tr>
              </thead>
              <tbody id="quotationDetailTableBody">
                <tr>
                  <td colspan="9" style="padding: 40px; text-align: center; color: #999;">
                    ìì¬ ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ê²¬ì  ìƒì„¸ë‚´ì—­ì„ ì…ë ¥í•˜ì„¸ìš”
                  </td>
                </tr>
              </tbody>
              <tfoot style="background: #f8f9fa; font-weight: 600;">
                <tr>
                  <td colspan="6" style="padding: 12px; text-align: right; border-top: 2px solid var(--border);">í•©ê³„</td>
                  <td id="totalSupplyPrice" style="padding: 12px; text-align: right; border-top: 2px solid var(--border);">0</td>
                  <td id="totalVat" style="padding: 12px; text-align: right; border-top: 2px solid var(--border);">0</td>
                  <td style="padding: 12px; border-top: 2px solid var(--border);"></td>
                </tr>
                <tr>
                  <td colspan="6" style="padding: 12px; text-align: right;">ì´ì•¡</td>
                  <td colspan="2" id="grandTotal" style="padding: 12px; text-align: right; color: #007bff; font-size: 16px;">0</td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div style="display: flex; gap: 12px; justify-content: flex-end;">
          <button type="button" onclick="closeQuotationModal()" style="
                padding: 10px 24px;
                background: var(--bg-light);
                border: 1px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                color: var(--text-dark);
              ">
            ì·¨ì†Œ
          </button>
          <button type="submit" style="
                padding: 10px 24px;
                background: var(--primary);
                border: none;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                color: white;
              ">
            ê²¬ì ì„œ ë“±ë¡
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ë§¤ì…ì²˜ ì‹ ê·œë“±ë¡ ëª¨ë‹¬ -->
  <div id="supplierModal" style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      ">
    <div style="
          background: white;
          border-radius: 12px;
          padding: 32px;
          width: 90%;
          max-width: 600px;
          max-height: 90vh;
          overflow-y: auto;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        ">
      <!-- ê³ ì •ëœ ì œëª© ì˜ì—­ -->
      <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            position: sticky;
            top: -32px;
            background: white;
            padding: 0 0 16px 0;
            border-bottom: 2px solid var(--border);
            z-index: 10;
          ">
        <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: var(--text-dark)">
          ë§¤ì…ì²˜ ì‹ ê·œë“±ë¡
        </h2>
        <button onclick="closeSupplierModal()" style="
              background: none;
              border: none;
              font-size: 24px;
              cursor: pointer;
              color: var(--text-gray);
            ">
          Ã—
        </button>
      </div>

      <form id="supplierForm" onsubmit="submitSupplier(event)">
        <!-- 1. ë§¤ì…ì²˜ì½”ë“œ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë§¤ì…ì²˜ì½”ë“œ</label>
          <input type="text" id="supplierCode" name="supplierCode" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ìë™ìƒì„±" />
        </div>

        <!-- 2. ë§¤ì…ì²˜ëª… (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë§¤ì…ì²˜ëª… *</label>
          <input type="text" id="supplierName" name="supplierName" required style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ë§¤ì…ì²˜ëª…" />
        </div>

        <!-- 3. ëŒ€í‘œìëª… (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ëŒ€í‘œìëª…</label>
          <input type="text" id="supplierCeoName" name="supplierCeoName" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ëŒ€í‘œìëª…" />
        </div>

        <!-- 4. ì‚¬ì—…ìë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì‚¬ì—…ìë²ˆí˜¸</label>
          <input type="text" id="supplierBusinessNo" name="supplierBusinessNo" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="000-00-00000" />
        </div>

        <!-- 5. ì—…íƒœ & ì—…ì¢… (1:1 ë¹„ìœ¨) -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px">
          <div>
            <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì—…íƒœ</label>
            <input type="text" id="supplierBusinessType" name="supplierBusinessType" style="
                  width: 100%;
                  padding: 12px 16px;
                  border: 2px solid var(--border);
                  border-radius: 8px;
                  font-size: 14px;
                " placeholder="ì—…íƒœ" />
          </div>
          <div>
            <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì—…ì¢…</label>
            <input type="text" id="supplierBusinessCategory" name="supplierBusinessCategory" style="
                  width: 100%;
                  padding: 12px 16px;
                  border: 2px solid var(--border);
                  border-radius: 8px;
                  font-size: 14px;
                " placeholder="ì—…ì¢…" />
          </div>
        </div>

        <!-- 6. ì—°ë½ì²˜ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì—°ë½ì²˜</label>
          <input type="tel" id="supplierPhone" name="supplierPhone" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="010-0000-0000" />
        </div>

        <!-- 7. íŒ©ìŠ¤ë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">íŒ©ìŠ¤ë²ˆí˜¸</label>
          <input type="tel" id="supplierFax" name="supplierFax" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="02-0000-0000" />
        </div>

        <!-- 8. ìš°í¸ë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„, ì°¾ê¸° ë²„íŠ¼ í¬í•¨) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ìš°í¸ë²ˆí˜¸</label>
          <div style="display: flex; gap: 8px">
            <input type="text" id="supplierZipCode" name="supplierZipCode" readonly style="
                  flex: 1;
                  padding: 12px 16px;
                  border: 2px solid var(--border);
                  border-radius: 8px;
                  font-size: 14px;
                  background-color: #f5f5f5;
                " placeholder="00000" />
            <button type="button" onclick="execDaumPostcode('supplier')" style="
                  padding: 10px 20px;
                  background: var(--primary);
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 14px;
                  font-weight: 500;
                  cursor: pointer;
                  white-space: nowrap;
                ">
              ì°¾ê¸°
            </button>
          </div>
        </div>

        <!-- 9. ì£¼ì†Œ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì£¼ì†Œ</label>
          <input type="text" id="supplierAddress" name="supplierAddress" readonly style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                background-color: #f5f5f5;
              " placeholder="ì£¼ì†Œ" />
        </div>

        <!-- 10. ìƒì„¸ì£¼ì†Œ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ìƒì„¸ì£¼ì†Œ</label>
          <input type="text" id="supplierAddressDetail" name="supplierAddressDetail" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ìƒì„¸ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <!-- 11. ì€í–‰ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ì€í–‰</label>
          <select id="supplierBankCode" name="supplierBankCode" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              ">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
            <option value="01">í•œêµ­ì€í–‰</option>
            <option value="02">ì‚°ì—…ì€í–‰</option>
            <option value="03">ê¸°ì—…ì€í–‰</option>
            <option value="04">êµ­ë¯¼ì€í–‰</option>
            <option value="05">ë†í˜‘</option>
            <option value="06">í•˜ë‚˜ì€í–‰</option>
            <option value="07">ìš°ë¦¬ì€í–‰</option>
            <option value="08">SCì€í–‰</option>
            <option value="09">ì”¨í‹°ì€í–‰</option>
          </select>
        </div>

        <!-- 12. ê³„ì¢Œë²ˆí˜¸ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ê³„ì¢Œë²ˆí˜¸</label>
          <input type="text" id="supplierAccountNo" name="supplierAccountNo" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ê³„ì¢Œë²ˆí˜¸" />
        </div>

        <!-- 13. ë‹´ë‹¹ìëª… (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë‹´ë‹¹ìëª…</label>
          <input type="text" id="supplierManagerName" name="supplierManagerName" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              " placeholder="ë‹´ë‹¹ìëª…" />
        </div>

        <!-- 14. ê±°ë˜ìƒíƒœ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 16px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ê±°ë˜ìƒíƒœ</label>
          <select id="supplierStatus" name="supplierStatus" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
              ">
            <option value="0">ì •ìƒê±°ë˜</option>
            <option value="1">ê±°ë˜ë³´ë¥˜</option>
          </select>
        </div>

        <!-- 15. ë¹„ê³ ë€ (ì „ì²´ ë„ˆë¹„) -->
        <div style="margin-bottom: 24px">
          <label style="display: block; margin-bottom: 8px; font-weight: 500; font-size: 14px">ë¹„ê³ ë€</label>
          <textarea id="supplierRemark" name="supplierRemark" style="
                width: 100%;
                padding: 12px 16px;
                border: 2px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                resize: vertical;
                min-height: 80px;
              " placeholder="ë¹„ê³ "></textarea>
        </div>

        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div style="display: flex; gap: 12px; justify-content: flex-end">
          <button type="button" onclick="closeSupplierModal()" style="
                padding: 10px 24px;
                background: var(--bg-light);
                border: 1px solid var(--border);
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                color: var(--text-dark);
              ">
            ì·¨ì†Œ
          </button>
          <button type="submit" style="
                padding: 10px 24px;
                background: var(--primary);
                border: none;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                color: white;
              ">
            ë“±ë¡
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ========================= -->
  <!-- ê±°ë˜ëª…ì„¸ì„œê´€ë¦¬ í˜ì´ì§€ -->
  <!-- ========================= -->
  <div class="page-content" id="transactionPage">
    <div class="toolbar">
      <div class="toolbar-left">
        <!-- ê¸°ì¤€ì¼ì -->
        <input type="date" id="transactionDate" class="form-input" />
        <!-- ê±°ë˜ì²˜ ì„ íƒ -->
        <select id="customerSelect" class="form-input">
          <option value="">ì „ì²´ ê±°ë˜ì²˜</option>
        </select>
        <button class="btn btn-secondary" onclick="loadTransactions()">ì¡°íšŒ</button>
      </div>
      <div class="toolbar-right">
        <button class="btn btn-success" onclick="openTransactionModal()">
          <span>+</span> ì‹ ê·œ ë“±ë¡
        </button>
      </div>
    </div>

    <!-- ê±°ë˜ëª…ì„¸ì„œ ëª©ë¡ -->
    <div class="table-container">
      <table class="data-table" id="transactionHeaderTable">
        <thead>
          <tr>
            <th><input type="checkbox" id="selectAllTransactions" /></th>
            <th>ê±°ë˜ë²ˆí˜¸</th>
            <th>ê±°ë˜ì¼ì</th>
            <th>ê±°ë˜ì²˜ëª…</th>
            <th>ê³µê¸‰ê°€ì•¡</th>
            <th>ë¶€ê°€ì„¸</th>
            <th>í•©ê³„ê¸ˆì•¡</th>
            <th>ë‹´ë‹¹ì</th>
            <th>ë¹„ê³ </th>
          </tr>
        </thead>
        <tbody id="transactionHeaderBody">
          <tr>
            <td colspan="9" class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ê±°ë˜ëª…ì„¸ì„œ ìƒì„¸ë‚´ì—­ -->
    <div class="table-container" style="margin-top: 20px">
      <h4>ğŸ“¦ ìƒì„¸ í’ˆëª© ë‚´ì—­</h4>
      <table class="data-table" id="transactionDetailTable">
        <thead>
          <tr>
            <th>í’ˆëª©ì½”ë“œ</th>
            <th>í’ˆëª…</th>
            <th>ê·œê²©</th>
            <th>ë‹¨ìœ„</th>
            <th>ìˆ˜ëŸ‰</th>
            <th>ë‹¨ê°€</th>
            <th>ê³µê¸‰ê°€ì•¡</th>
            <th>ë¶€ê°€ì„¸</th>
            <th>í•©ê³„ê¸ˆì•¡</th>
            <th>ë‹¨ê°€ì¡°íšŒ</th>
          </tr>
        </thead>
        <tbody id="transactionDetailBody">
          <tr>
            <td colspan="10" class="loading">ê±°ë˜ëª…ì„¸ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ========================= -->
  <!-- ê±°ë˜ëª…ì„¸ì„œ ì‹ ê·œë“±ë¡ ëª¨ë‹¬ -->
  <!-- ========================= -->
  <div id="transactionModal" class="modal hidden">
    <div class="modal-content">
      <h3>ê±°ë˜ëª…ì„¸ì„œ ì‹ ê·œë“±ë¡</h3>

      <div class="form-group">
        <label>ê±°ë˜ì¼ì</label>
        <input type="date" id="newTransactionDate" />
      </div>

      <div class="form-group">
        <label>ë§¤ì¶œì²˜</label>
        <div style="display: flex; gap: 8px">
          <input type="text" id="newCustomerName" placeholder="ë§¤ì¶œì²˜ ì„ íƒ" readonly />
          <button class="btn btn-secondary" onclick="openCustomerModal()">ì¡°íšŒ</button>
        </div>
      </div>

      <div class="form-group">
        <label>ìì¬ì¶”ê°€</label>
        <button class="btn btn-primary" onclick="openItemModal()">ìì¬ì¡°íšŒ</button>
      </div>

      <div id="newTransactionItems"></div>

      <div style="margin-top: 16px; text-align: right">
        <button class="btn btn-success" onclick="saveTransaction()">ì €ì¥</button>
        <button class="btn btn-secondary" onclick="closeTransactionModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ========================= -->
  <!-- ìì¬ì¡°íšŒ ëª¨ë‹¬ -->
  <!-- ========================= -->
  <div id="itemModal" class="modal hidden">
    <div class="modal-content">
      <h3>ìì¬ ì¡°íšŒ</h3>
      <input type="text" id="itemSearch" placeholder="ìì¬ëª… ë˜ëŠ” ì½”ë“œ ê²€ìƒ‰..." />
      <button class="btn btn-secondary" onclick="searchItems()">ê²€ìƒ‰</button>
      <table class="data-table">
        <thead>
          <tr>
            <th>ì½”ë“œ</th>
            <th>ìì¬ëª…</th>
            <th>ê·œê²©</th>
            <th>ë‹¨ìœ„</th>
            <th>ì„ íƒ</th>
          </tr>
        </thead>
        <tbody id="itemTableBody">
          <tr>
            <td colspan="5">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
          </tr>
        </tbody>
      </table>
      <div style="text-align: right">
        <button class="btn btn-secondary" onclick="closeItemModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ========================= -->
  <!-- ë§¤ì¶œì²˜ì¡°íšŒ ëª¨ë‹¬ -->
  <!-- ========================= -->
  <div id="customerModal" class="modal hidden">
    <div class="modal-content">
      <h3>ë§¤ì¶œì²˜ ì¡°íšŒ</h3>
      <input type="text" id="customerSearchSimple" placeholder="ë§¤ì¶œì²˜ëª… ê²€ìƒ‰..." />
      <button class="btn btn-secondary" onclick="searchCustomers()">ê²€ìƒ‰</button>
      <table class="data-table">
        <thead>
          <tr>
            <th>ì½”ë“œ</th>
            <th>ë§¤ì¶œì²˜ëª…</th>
            <th>ì‚¬ì—…ìë²ˆí˜¸</th>
            <th>ì—°ë½ì²˜</th>
            <th>ì„ íƒ</th>
          </tr>
        </thead>
        <tbody id="customerTableBodyModal">
          <tr>
            <td colspan="5">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
          </tr>
        </tbody>
      </table>
      <div style="text-align: right">
        <button class="btn btn-secondary" onclick="closeCustomerModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ========================= -->
  <!-- ë‹¨ê°€ì¡°íšŒ ëª¨ë‹¬ -->
  <!-- ========================= -->
  <div id="priceModal" class="modal hidden">
    <div class="modal-content">
      <h3>ìµœê·¼ 1ë…„ ê±°ë˜ë‹¨ê°€ ì¡°íšŒ</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>ê±°ë˜ì¼ì</th>
            <th>ë§¤ì¶œì²˜</th>
            <th>ìì¬ëª…</th>
            <th>ìˆ˜ëŸ‰</th>
            <th>ë‹¨ê°€</th>
          </tr>
        </thead>
        <tbody id="priceTableBody">
          <tr>
            <td colspan="5">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
          </tr>
        </tbody>
      </table>
      <div style="text-align: right">
        <button class="btn btn-secondary" onclick="closePriceModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ê±°ë˜ëª…ì„¸ì„œ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ style="width: 800px" -->
  <div id="previewModal" class="modal">
    <div class="modal-content" style="display:none;">
      <span class="close" onclick="closePreviewModal()">&times;</span>
      <h2>ê±°ë˜ëª…ì„¸ì„œ ë¯¸ë¦¬ë³´ê¸°</h2>

      <div id="previewHeader">
        <p><strong>ê±°ë˜ì¼ì:</strong> <span id="previewDate"></span></p>
        <p><strong>ê±°ë˜ë²ˆí˜¸:</strong> <span id="previewNo"></span></p>
        <p><strong>ê±°ë˜ì²˜ëª…:</strong> <span id="previewCustomer"></span></p>
      </div>

      <table class="table preview-table">
        <thead>
          <tr>
            <th>ìì¬ëª…</th>
            <th>ê·œê²©</th>
            <th>ë‹¨ìœ„</th>
            <th>ìˆ˜ëŸ‰</th>
            <th>ë‹¨ê°€</th>
            <th>ê³µê¸‰ê°€ì•¡</th>
            <th>ë¶€ê°€ì„¸</th>
            <th>í•©ê³„ê¸ˆì•¡</th>
          </tr>
        </thead>
        <tbody id="previewBody"></tbody>
      </table>

      <div class="preview-total">
        <p><strong>ì´ ê³µê¸‰ê°€ì•¡:</strong> <span id="previewSubtotal"></span> ì›</p>
        <p><strong>ì´ ë¶€ê°€ì„¸:</strong> <span id="previewTax"></span> ì›</p>
        <p><strong>ì´ í•©ê³„ê¸ˆì•¡:</strong> <span id="previewTotal"></span> ì›</p>
      </div>

      <div style="text-align: right; margin-top: 15px">
        <button class="btn btn-primary" onclick="printPreview()">ğŸ–¨ ì¸ì‡„</button>
        <button class="btn btn-secondary" onclick="closePreviewModal()">ë‹«ê¸°</button>
      </div>
    </div>
  </div>
</body>

</html>
