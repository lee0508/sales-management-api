<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>íšŒê³„ê´€ë¦¬ - ê³„ì •ê³¼ëª© ë° í˜„ê¸ˆì¶œë‚© ê´€ë¦¬</title>
    <style>
      body {
        font-family: 'Noto Sans KR', sans-serif;
        margin: 20px;
        background-color: #f5f6fa;
      }
      h2,
      h3 {
        color: #333;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        background: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px 12px;
        text-align: center;
      }
      th {
        background-color: #4a69bd;
        color: #fff;
      }
      input,
      select,
      button {
        padding: 6px 10px;
        margin: 4px;
      }
      button {
        cursor: pointer;
        background: #4a69bd;
        color: white;
        border: none;
        border-radius: 4px;
      }
      button:hover {
        background: #1e3799;
      }
      .form-section,
      .toolbar {
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .summary {
        font-weight: bold;
        background: #fff;
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-around;
        width: 60%;
      }
      .toolbar label {
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <!-- <h2>ê³„ì •ê³¼ëª© ëª©ë¡</h2>
    <table id="accountTable">
      <thead>
        <tr>
          <th>ê³„ì •ì½”ë“œ</th>
          <th>ê³„ì •ëª…</th>
          <th>í•©ê³„ì‹œì‚°í‘œì—°ê²°</th>
          <th>ì ìš”</th>
          <th>ì‚¬ìš©êµ¬ë¶„</th>
          <th>ìˆ˜ì •ì¼ì</th>
          <th>ì‚¬ìš©ìì½”ë“œ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table> -->

    <h2>í˜„ê¸ˆì¶œë‚© ê´€ë¦¬</h2>
    <!-- <div class="form-section">
      <label>ì¼ì: <input type="date" id="date" /></label>
      <label
        >ê³„ì •ê³¼ëª©:
        <select id="accountSelect"></select>
      </label>
      <label
        >ìˆ˜ì…/ì§€ì¶œ:
        <select id="type">
          <option value="in">ìˆ˜ì…</option>
          <option value="out">ì§€ì¶œ</option>
        </select>
      </label>
      <label>ê¸ˆì•¡: <input type="number" id="amount" placeholder="ê¸ˆì•¡ ì…ë ¥" /></label>
      <label>ì ìš”: <input type="text" id="desc" placeholder="ë‚´ìš© ì…ë ¥" /></label>
      <button onclick="addTransaction()">ë“±ë¡</button>
    </div> -->

    <!-- ğŸ” ê²€ìƒ‰ íˆ´ë°” -->
    <div class="toolbar">
      <label
        >ê³„ì •ê³¼ëª©:
        <select id="filterAccount">
          <option value="">ì „ì²´</option>
        </select>
      </label>
      <label>ì‹œì‘ì¼: <input type="date" id="filterStart" /></label>
      <label>ì¢…ë£Œì¼: <input type="date" id="filterEnd" /></label>
      <button onclick="filterTransactions()">ê²€ìƒ‰</button>
      <button onclick="resetFilter()">ì „ì²´ë³´ê¸°</button>
      <button onclick="addTransaction()">ë“±ë¡</button>
    </div>

    <h3>í˜„ê¸ˆì¶œë‚© ë‚´ì—­</h3>
    <table id="cashTable">
      <thead>
        <tr>
          <th>ì¼ì</th>
          <th>ê³„ì •ê³¼ëª©</th>
          <th>ì°¨ëŒ€êµ¬ë¶„</th>
          <th>êµ¬ë¶„</th>
          <th>ê¸ˆì•¡</th>
          <th>ì ìš”</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- í•©ê³„ í‘œì‹œ -->
    <div class="summary">
      <span>ìˆ˜ì… í•©ê³„: <span id="incomeTotal">0</span> ì›</span>
      <span>ì§€ì¶œ í•©ê³„: <span id="expenseTotal">0</span> ì›</span>
      <span>ì”ì•¡: <span id="balanceTotal">0</span> ì›</span>
    </div>

    <script>
      // ê³„ì •ê³¼ëª© ìƒ˜í”Œ ë°ì´í„°
      const accounts = [
        {
          code: '1000',
          name: 'í˜„ê¸ˆ',
          connect: 'Y',
          note: 'í˜„ê¸ˆ ìì‚° ê³„ì •',
          use: 0,
          date: '20251112',
          user: 'A001',
        },
        {
          code: '1100',
          name: 'ë³´í†µì˜ˆê¸ˆ',
          connect: 'Y',
          note: 'ê¸°ì—…ì€í–‰ ì˜ˆê¸ˆ ê³„ì •',
          use: 0,
          date: '20251112',
          user: 'A001',
        },
        {
          code: '1200',
          name: 'ë§¤ì¶œì±„ê¶Œ',
          connect: 'Y',
          note: 'ì™¸ìƒ ë§¤ì¶œ ê´€ë ¨',
          use: 0,
          date: '20251112',
          user: 'A001',
        },
        {
          code: '2000',
          name: 'ë§¤ì…ì±„ë¬´',
          connect: 'Y',
          note: 'ì™¸ìƒ ë§¤ì… ê´€ë ¨',
          use: 0,
          date: '20251112',
          user: 'A001',
        },
        {
          code: '2100',
          name: 'ë¯¸ì§€ê¸‰ê¸ˆ',
          connect: 'N',
          note: 'ê¸°íƒ€ ë¯¸ì§€ê¸‰ê¸ˆ',
          use: 0,
          date: '20251112',
          user: 'A001',
        },
        {
          code: '3000',
          name: 'ìë³¸ê¸ˆ',
          connect: 'Y',
          note: 'ìë³¸ê¸ˆ ê³„ì •',
          use: 0,
          date: '20251112',
          user: 'A001',
        },
      ];

      // ì´ˆê¸° ê³„ì • ëª©ë¡ í‘œì‹œ
      const accountTableBody = document.querySelector('#accountTable tbody');
      const accountSelect = document.querySelector('#accountSelect');
      const filterAccount = document.querySelector('#filterAccount');

      accounts.forEach((acc) => {
        const row = `<tr>
        <td>${acc.code}</td>
        <td>${acc.name}</td>
        <td>${acc.connect}</td>
        <td>${acc.note}</td>
        <td>${acc.use}</td>
        <td>${acc.date}</td>
        <td>${acc.user}</td>
      </tr>`;
        accountTableBody.insertAdjacentHTML('beforeend', row);
        accountSelect.insertAdjacentHTML(
          'beforeend',
          `<option value="${acc.name}">${acc.name}</option>`,
        );
        filterAccount.insertAdjacentHTML(
          'beforeend',
          `<option value="${acc.name}">${acc.name}</option>`,
        );
      });

      // ì¶œë‚© ë°ì´í„° ë°°ì—´
      let transactions = [];
      let incomeTotal = 0;
      let expenseTotal = 0;

      function addTransaction() {
        const date = document.getElementById('date').value;
        const accountName = document.getElementById('accountSelect').value;
        const account = accounts.find((a) => a.name === accountName);
        const dc = account ? (account.dc === 'D' ? 'ì°¨ë³€' : 'ëŒ€ë³€') : '-';
        const type = document.getElementById('type').value;
        const amount = parseInt(document.getElementById('amount').value);
        const desc = document.getElementById('desc').value;

        if (!date || !amount) {
          alert('ì¼ìì™€ ê¸ˆì•¡ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.');
          return;
        }

        const row = `<tr>
          <td>${date}</td>
          <td>${accountName}</td>
          <td>${dc}</td> <!-- âœ… ì°¨ëŒ€ í‘œì‹œ -->
          <td>${type === 'in' ? 'ìˆ˜ì…' : 'ì§€ì¶œ'}</td>
          <td>${amount.toLocaleString()}</td>
          <td>${desc}</td>
        </tr>`;
        document.querySelector('#cashTable tbody').insertAdjacentHTML('beforeend', row);
      }

      // í…Œì´ë¸” í‘œì‹œ
      function renderTable(data) {
        const cashTableBody = document.querySelector('#cashTable tbody');
        cashTableBody.innerHTML = '';

        data.forEach((tr) => {
          const row = `<tr>
          <td>${tr.date}</td>
          <td>${tr.account}</td>
          <td>${tr.type === 'in' ? 'ìˆ˜ì…' : 'ì§€ì¶œ'}</td>
          <td>${tr.amount.toLocaleString()}</td>
          <td>${tr.desc}</td>
        </tr>`;
          cashTableBody.insertAdjacentHTML('beforeend', row);
        });
      }

      // í•©ê³„ ê°±ì‹ 
      function updateTotals(data = transactions) {
        incomeTotal = 0;
        expenseTotal = 0;

        data.forEach((tr) => {
          if (tr.type === 'in') incomeTotal += tr.amount;
          else expenseTotal += tr.amount;
        });

        const balance = incomeTotal - expenseTotal;
        document.getElementById('incomeTotal').innerText = incomeTotal.toLocaleString();
        document.getElementById('expenseTotal').innerText = expenseTotal.toLocaleString();
        document.getElementById('balanceTotal').innerText = balance.toLocaleString();
      }

      // ğŸ” ê²€ìƒ‰ í•„í„° ê¸°ëŠ¥
      function filterTransactions() {
        const accountFilter = document.getElementById('filterAccount').value;
        const start = document.getElementById('filterStart').value;
        const end = document.getElementById('filterEnd').value;

        let filtered = transactions;

        if (accountFilter) {
          filtered = filtered.filter((tr) => tr.account === accountFilter);
        }

        if (start) {
          filtered = filtered.filter((tr) => tr.date >= start);
        }
        if (end) {
          filtered = filtered.filter((tr) => tr.date <= end);
        }

        renderTable(filtered);
        updateTotals(filtered);
      }

      // ì „ì²´ë³´ê¸°
      function resetFilter() {
        document.getElementById('filterAccount').value = '';
        document.getElementById('filterStart').value = '';
        document.getElementById('filterEnd').value = '';
        renderTable(transactions);
        updateTotals();
      }
    </script>
  </body>
</html>
